<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>CodeKids â€” Learn to Code!</title>
<meta name="theme-color" content="#020617">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš€</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Fira+Code:wght@400;500&family=Noto+Sans+Arabic:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESET â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;overflow:hidden}

:root{
  --bg:#020617;--panel:rgba(15,23,42,0.96);
  --card:rgba(15,23,42,0.96);--card-border:rgba(148,163,184,0.3);
  --accent:#22c55e;--accent-soft:rgba(34,197,94,0.15);
  --accent-strong:rgba(34,197,94,0.7);--accent2:#3b82f6;
  --text:#f9fafb;--muted:#9ca3af;--border:#1f2937;
  --editor-bg:rgba(2,6,23,0.8);
  --btn-grad:linear-gradient(135deg,#22c55e,#16a34a);
  --glow1:rgba(34,197,94,0.18);--glow2:rgba(59,130,246,0.2);
  --shadow:rgba(15,23,42,0.85);
  --pill-bg:rgba(15,23,42,0.9);--pill-border:rgba(148,163,184,0.6);
  --font:'Fredoka',sans-serif;--mono:'Fira Code',monospace;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• APP SHELL â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#app{
  font-family:var(--font);color:var(--text);height:100vh;
  display:flex;position:relative;overflow:hidden;
  background:radial-gradient(circle at top left,var(--glow1),transparent 50%),
    radial-gradient(circle at bottom right,var(--glow2),transparent 55%),var(--bg);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STAR CANVAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#starfield{position:fixed;inset:0;pointer-events:none;z-index:0}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#sidebar{
  width:290px;min-width:290px;
  background:var(--panel);backdrop-filter:blur(20px);
  display:flex;flex-direction:column;z-index:10;
  border-right:1px solid var(--card-border);
  transition:margin .3s ease,opacity .3s ease;
  position:relative;
}
#sidebar.closed{margin-left:-290px;opacity:0}
.rtl #sidebar{border-right:none;border-left:1px solid var(--card-border)}
.rtl #sidebar.closed{margin-left:0;margin-right:-290px}

/* Logo Header */
.sb-header{
  padding:16px 18px 14px;text-align:center;
  border-bottom:1px solid var(--border);
}
.logo-row{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:6px}
.logo-row svg{height:22px;width:auto}
.logo-row h1{
  font-size:22px;font-weight:700;letter-spacing:.08em;text-transform:uppercase;
  background:var(--btn-grad);-webkit-background-clip:text;
  -webkit-text-fill-color:transparent;background-clip:text;
}
.sb-header .subtitle{
  font-size:.72rem;color:var(--muted);letter-spacing:.08em;text-transform:uppercase;
}
.sb-header .chip{
  display:inline-flex;align-items:center;gap:5px;
  border-radius:999px;border:1px solid var(--accent-strong);
  padding:3px 10px;margin-top:8px;
  background:radial-gradient(circle at top left,var(--accent-soft),transparent 60%),var(--pill-bg);
  font-size:.68rem;text-transform:uppercase;letter-spacing:.1em;color:var(--accent);
}
.chip-dot{width:6px;height:6px;border-radius:50%;background:var(--accent);box-shadow:0 0 8px var(--accent-strong)}

/* Track Selector */
.track-row{
  display:flex;border-bottom:1px solid var(--border);
}
.track-btn{
  flex:1;padding:10px 8px;border:none;background:transparent;
  color:var(--muted);font-family:var(--font);font-size:.78rem;
  font-weight:600;cursor:pointer;letter-spacing:.05em;
  text-transform:uppercase;transition:all .2s;
  border-bottom:2px solid transparent;
}
.track-btn.active{color:var(--accent);border-bottom-color:var(--accent);background:var(--accent-soft)}
.track-btn:hover:not(.active){background:rgba(255,255,255,0.03)}

/* Controls */
.ctrl-row{
  display:flex;gap:5px;padding:10px 12px;
  border-bottom:1px solid var(--border);flex-wrap:wrap;
}
.ctrl-cell{
  flex:1;min-width:60px;padding:4px;
  border:1px solid var(--card-border);border-radius:8px;
  background:rgba(255,255,255,0.03);
}
.ctrl-cell select{
  width:100%;background:transparent;border:none;
  color:var(--text);font-family:var(--font);font-size:.72rem;
  cursor:pointer;outline:none;text-align:center;
}
.ctrl-cell select option{background:#0f172a;color:#fff}

/* Progress */
.star-row{
  padding:8px 14px;display:flex;align-items:center;gap:8px;
  font-size:.75rem;color:var(--muted);border-bottom:1px solid var(--border);
}
.star-row .num{color:gold;font-weight:700;font-size:16px}
.track-p{flex:1;height:5px;border-radius:3px;background:rgba(255,255,255,0.08);overflow:hidden}
.track-p-fill{height:100%;border-radius:3px;background:var(--btn-grad);transition:width .5s ease}

/* Lesson List */
.lessons-scroll{flex:1;overflow-y:auto;padding:2px 0}
.tier-label{
  padding:10px 14px 4px;font-size:.68rem;font-weight:600;
  color:var(--accent);text-transform:uppercase;letter-spacing:1.2px;
  display:flex;align-items:center;gap:6px;
}
.tier-label .tier-dot{
  width:8px;height:8px;border-radius:50%;
  box-shadow:0 0 6px currentColor;
}
.tier-label .tier-dot.green{background:#22c55e;color:#22c55e}
.tier-label .tier-dot.blue{background:#3b82f6;color:#3b82f6}
.tier-label .tier-dot.red{background:#ef4444;color:#ef4444}
.tier-label .tier-dot.yellow{background:#eab308;color:#eab308}

.les-btn{
  display:flex;align-items:center;gap:8px;
  padding:8px 12px;margin:1px 6px;border-radius:10px;
  border:none;background:transparent;color:var(--text);
  font-family:var(--font);font-size:.8rem;cursor:pointer;
  width:calc(100% - 12px);transition:all .2s;text-align:left;
}
.rtl .les-btn{text-align:right}
.les-btn:hover{background:rgba(255,255,255,0.05)}
.les-btn.active{
  background:var(--card);
  box-shadow:inset 0 0 0 1px var(--accent),0 2px 8px rgba(0,0,0,0.2);
}
.les-btn .dot{
  width:20px;height:20px;border-radius:50%;flex-shrink:0;
  border:2px solid rgba(255,255,255,0.15);
  display:flex;align-items:center;justify-content:center;
  font-size:10px;transition:all .3s;
}
.les-btn .dot.done{background:var(--btn-grad);border-color:transparent}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#main{flex:1;display:flex;flex-direction:column;z-index:5;position:relative;min-width:0}

.topbar{
  display:flex;align-items:center;gap:10px;padding:10px 16px;
  background:var(--panel);border-bottom:1px solid var(--border);
}
.menu-btn{
  width:34px;height:34px;border-radius:8px;
  background:none;border:1px solid var(--card-border);
  color:var(--text);font-size:18px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;transition:all .2s;
}
.menu-btn:hover{background:rgba(255,255,255,0.06)}
.les-info{flex:1;min-width:0}
.les-info h2{font-size:1rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.les-info p{font-size:.72rem;color:var(--muted)}
.tier-badge{
  font-size:.65rem;font-weight:600;padding:3px 8px;border-radius:999px;
  border:1px solid var(--accent-strong);color:var(--accent);
  background:var(--accent-soft);text-transform:uppercase;letter-spacing:.08em;
  white-space:nowrap;
}
.nav-btns{display:flex;gap:6px}
.nav-b{
  padding:6px 12px;border-radius:8px;
  border:1px solid var(--card-border);background:rgba(255,255,255,0.03);
  color:var(--text);font-family:var(--font);font-size:.75rem;
  cursor:pointer;transition:all .2s;
}
.nav-b:hover:not(:disabled){background:rgba(255,255,255,0.08);border-color:var(--accent)}
.nav-b:disabled{opacity:.3;cursor:default}

/* Editor */
.editor-wrap{flex:1;display:flex;overflow:hidden}
.panel{flex:1;display:flex;flex-direction:column;min-width:0}
.panel-code{border-right:1px solid var(--border)}
.rtl .panel-code{border-right:none;border-left:1px solid var(--border)}
.panel-head{
  padding:8px 14px;font-size:.72rem;font-weight:600;
  color:var(--muted);background:rgba(0,0,0,0.2);
  text-transform:uppercase;letter-spacing:.08em;
  display:flex;align-items:center;justify-content:space-between;
}

textarea#codeEditor{
  flex:1;width:100%;padding:14px;
  background:var(--editor-bg);color:var(--accent);
  border:none;outline:none;resize:none;
  font-family:var(--mono);font-size:13px;line-height:1.6;
  tab-size:2;direction:ltr!important;text-align:left!important;
}

.action-bar{display:flex;gap:6px;padding:8px 12px;background:rgba(0,0,0,0.2)}
.run-btn{
  flex:1;padding:10px;border:none;border-radius:999px;
  background:var(--btn-grad);color:#fff;
  font-family:var(--font);font-size:.85rem;font-weight:700;
  cursor:pointer;transition:all .2s;letter-spacing:.05em;
  text-transform:uppercase;
}
.run-btn:hover{transform:translateY(-1px);box-shadow:0 4px 20px var(--shadow)}
.run-btn:active{transform:scale(.97)}
.sec-btn{
  padding:10px 14px;border-radius:999px;
  border:1px solid var(--card-border);background:rgba(255,255,255,0.03);
  color:var(--text);font-family:var(--font);font-size:.78rem;
  cursor:pointer;transition:all .2s;
}
.sec-btn:hover{background:rgba(255,255,255,0.08)}
.hint-btn{color:var(--muted)}
.hint-btn:hover{color:var(--accent)!important}

.hint-box{
  padding:8px 14px;background:rgba(234,179,8,0.08);
  border-top:1px solid rgba(234,179,8,0.2);
  font-size:.78rem;color:#eab308;display:none;
}
.hint-box.show{display:block}

iframe#preview{flex:1;border:none;background:#fff;width:100%}

/* Toast */
.toast{
  position:fixed;top:16px;left:50%;
  transform:translateX(-50%) translateY(-20px) scale(.9);
  padding:10px 24px;background:var(--btn-grad);
  color:#fff;font-family:var(--font);font-size:1rem;font-weight:700;
  border-radius:999px;z-index:999;opacity:0;
  box-shadow:0 8px 30px var(--shadow);pointer-events:none;
  transition:all .4s cubic-bezier(.34,1.56,.64,1);
  letter-spacing:.05em;
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0) scale(1)}

/* Mobile */
@media(max-width:800px){
  #sidebar{position:fixed;top:0;left:0;height:100vh;z-index:100}
  #sidebar.closed{left:-290px;margin:0}
  .rtl #sidebar{left:auto;right:0}
  .rtl #sidebar.closed{right:-290px;margin:0}
  .editor-wrap{flex-direction:column}
  .panel-code{border-right:none!important;border-left:none!important;border-bottom:1px solid var(--border);min-height:38vh}
  .panel-preview{min-height:35vh}
  .nav-btns{display:none}
  .tier-badge{display:none}
}
</style>
</head>
<body>
<div id="app">
<canvas id="starfield"></canvas>

<!-- SIDEBAR -->
<aside id="sidebar">
  <div class="sb-header">
    <div class="logo-row">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="-92.82 179.97 6 3.22" height="22">
        <path fill="var(--accent)" d="M-90.269 180.707c-.001-.003-.012-.152-.024-.331-.012-.179-.023-.334-.024-.344l-.003-.018h.023c.013 0 .038-.002.056-.004.018-.002.049-.004.068-.005l-.035-.002-.009.128c-.004.071-.009.139-.01.151l-.003.022-.06-.098a41 41 0 0 0-.098-.158l-.037-.061-.036.002c-.02.001-.058.004-.086.006-.028.002-.058.004-.067.004l-.016.001.112.169.112.169-.14.176c-.078.096-.141.177-.141.178 0 .002-.002.003-.004.003-.017 0-.197.012-.202.014-.004.001-.035-.036-.11-.133-.057-.074-.105-.133-.107-.132-.002.001-.009.012-.015.023l-.012.021-.008.115c-.006.085-.007.116-.01.118-.005.003-.043.007-.117.01-.047.002-.057.002-.058-.003z"/>
        <path fill="var(--accent)" d="M-89.191 180.769a.64.64 0 0 1-.17-.052.8.8 0 0 1-.12-.076l-.01-.005.034-.148c.006-.023.018-.02.042.01a.45.45 0 0 0 .215.132c.036.006.04.006.06 0 .036-.012.054-.038.048-.07-.004-.022-.04-.052-.101-.084-.072-.037-.094-.051-.127-.082a.2.2 0 0 1-.057-.183c.017-.082.069-.132.16-.158a.3.3 0 0 1 .154-.001.6.6 0 0 1 .21.088l.033.024-.001.009-.021.077c-.018.065-.017.068-.026.067-.006-.001-.013-.006-.017-.012-.011-.016-.058-.06-.077-.074-.052-.035-.118-.058-.161-.053-.053.004-.083.042-.064.081.009.018.033.036.098.071.104.055.155.098.178.149.013.028.016.08.007.117-.028.108-.117.171-.242.17a.3.3 0 0 1-.055-.008z"/>
        <path fill="var(--accent)" d="M-91.104 180.904a5 5 0 0 1-.142-.318l-.085-.194c-.002-.002-.083-.04-.197-.09a2 2 0 0 1-.132-.054c.08-.025.155-.014.204.03.024.022.042.051.057.094a.3.3 0 0 0 .012.071c.001.03.003.041.012.063.011.03.03.065.039.072l.006.003.006.002c-.069.037-.237.138-.237.138l.124.123-.127-.022.066.034c.052.023.098.042.103.043.005 0 .07-.034.146-.075l.138-.075.026.012.027.013-.022.051c-.028.061-.051.114-.051.117l.002.005.076.04c.043.02.08.035.082.035l.03-.062zm.11-.319c.066-.031.091-.058.091-.1 0-.036-.024-.079-.05-.09-.03-.011-.052-.007-.121.023l-.022.01c-.001 0 .073.168.075.168z"/>
        <path fill="var(--accent)" d="M-88.329 181.181a1 1 0 0 1-.071-.05l.086-.128c.048-.07.087-.128.085-.129l-.17-.12-.087.126c-.048.069-.09.126-.091.126l-.146-.1c0-.002.18-.26.36-.52l.04-.054-.146.099c-.001 0 .031.046.07.101.038.056.07.103.071.106l-.09.069a1 1 0 0 1-.098.065l.075-.101c.039-.056.072-.108.074-.108l-.145-.102c0 .005-.395.574-.399.573l.373-.05z"/>
        <path fill="var(--accent)" d="M-91.754 181.531a.41.41 0 0 1-.329-.309.29.29 0 0 1 .002-.153.42.42 0 0 1 .257-.252.25.25 0 0 1 .16.002.5.5 0 0 1 .18.113c.054.053.09.108.11.166a.29.29 0 0 0 .014.082c-.002.051.003.079.019.121.024.063.087.138.151.18.069.046.139.062.224.05zm.149-.168a.14.14 0 0 0 .06-.157.37.37 0 0 0-.234-.234.16.16 0 0 0-.124.033.14.14 0 0 0-.043.081c-.008.057.027.13.095.197a.28.28 0 0 0 .162.109.12.12 0 0 0 .084-.03z"/>
        <path fill="var(--accent)" d="M-90.371 181.625a.1.1 0 0 1-.046-.076c-.058-.127-.058-.128-.072-.13l-.12-.003-.008.015a.16.16 0 0 1-.071.064.14.14 0 0 1-.183-.032.17.17 0 0 1-.032-.058.2.2 0 0 1 .012-.061.2.2 0 0 1 .077-.077.17.17 0 0 1 .06-.013.22.22 0 0 1 .137.068l.018.026h.139l.139.001-.02.01a.3.3 0 0 0-.044.054l-.037.079c-.023.051-.044.097-.047.102-.011.018-.005.02-.053.02a.5.5 0 0 1-.058-.002z"/>
      </svg>
      <h1>CodeKids</h1>
    </div>
    <div class="subtitle" id="brandSub">Play â€¢ Learn â€¢ Create</div>
    <div class="chip"><div class="chip-dot"></div><span id="chipText">Ready!</span></div>
  </div>

  <!-- Track Selector -->
  <div class="track-row">
    <button class="track-btn active" data-track="basics" onclick="switchTrack('basics')">ğŸ“– <span id="trackLabel1">Basics</span></button>
    <button class="track-btn" data-track="science" onclick="switchTrack('science')">ğŸ”¬ <span id="trackLabel2">Science</span></button>
  </div>

  <!-- Controls -->
  <div class="ctrl-row">
    <div class="ctrl-cell"><select id="langSelect" onchange="switchLang(this.value)">
      <option value="en">ğŸ‡¬ğŸ‡§ EN</option><option value="fr">ğŸ‡«ğŸ‡· FR</option><option value="ar">ğŸ‡¸ğŸ‡¦ AR</option>
    </select></div>
    <div class="ctrl-cell"><select id="themeSelect" onchange="switchTheme(this.value)"></select></div>
  </div>

  <!-- Progress -->
  <div class="star-row">
    <span>â­</span><span class="num" id="starCount">0</span><span id="starTotal">/ 13</span>
    <div class="track-p"><div class="track-p-fill" id="trackFill" style="width:0%"></div></div>
  </div>

  <div class="lessons-scroll" id="lessonList"></div>
</aside>

<!-- MAIN -->
<main id="main">
  <div class="topbar">
    <button class="menu-btn" id="menuBtn" onclick="toggleSidebar()">â˜°</button>
    <div class="les-info"><h2 id="lesTitle"></h2><p id="lesDesc"></p></div>
    <span class="tier-badge" id="tierBadge"></span>
    <div class="nav-btns">
      <button class="nav-b" id="prevBtn" onclick="go(-1)">â—€</button>
      <button class="nav-b" id="nextBtn" onclick="go(1)">â–¶</button>
    </div>
  </div>
  <div class="editor-wrap">
    <div class="panel panel-code">
      <div class="panel-head"><span id="labelTry">TRY IT</span></div>
      <textarea id="codeEditor" spellcheck="false"></textarea>
      <div class="action-bar">
        <button class="run-btn" id="runBtn" onclick="runCode()">ğŸš€ Launch</button>
        <button class="sec-btn" onclick="resetCode()" id="resetBtn">â†º Reset</button>
        <button class="sec-btn hint-btn" onclick="toggleHint()" id="hintBtn">ğŸ’¡</button>
      </div>
      <div class="hint-box" id="hintBox"></div>
    </div>
    <div class="panel panel-preview">
      <div class="panel-head"><span id="labelOut">RESULT</span></div>
      <iframe id="preview" sandbox="allow-scripts allow-modals" title="preview"></iframe>
    </div>
  </div>
</main>
<div class="toast" id="toast"></div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEMES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TH={
  stealth:{
    n:{en:"ğŸŒ™ Stealth",fr:"ğŸŒ™ Furtif",ar:"ğŸŒ™ Ø´Ø¨Ø­"},
    v:{"--bg":"#020617","--panel":"rgba(15,23,42,0.96)","--card":"rgba(15,23,42,0.96)","--card-border":"rgba(148,163,184,0.3)","--accent":"#22c55e","--accent-soft":"rgba(34,197,94,0.15)","--accent-strong":"rgba(34,197,94,0.7)","--accent2":"#3b82f6","--text":"#f9fafb","--muted":"#9ca3af","--border":"#1f2937","--editor-bg":"rgba(2,6,23,0.8)","--btn-grad":"linear-gradient(135deg,#22c55e,#16a34a)","--glow1":"rgba(34,197,94,0.18)","--glow2":"rgba(59,130,246,0.2)","--shadow":"rgba(15,23,42,0.85)","--pill-bg":"rgba(15,23,42,0.9)","--pill-border":"rgba(148,163,184,0.6)"},stars:true},
  neon:{
    n:{en:"âš¡ Neon",fr:"âš¡ NÃ©on",ar:"âš¡ Ù†ÙŠÙˆÙ†"},
    v:{"--bg":"#0a0a1a","--panel":"rgba(18,18,42,0.96)","--card":"rgba(18,18,42,0.96)","--card-border":"rgba(100,100,255,0.25)","--accent":"#00d4ff","--accent-soft":"rgba(0,212,255,0.15)","--accent-strong":"rgba(0,212,255,0.7)","--accent2":"#ff00ff","--text":"#eeeeff","--muted":"#8888bb","--border":"#1a1a3a","--editor-bg":"rgba(10,10,26,0.8)","--btn-grad":"linear-gradient(135deg,#00d4ff,#0088ff)","--glow1":"rgba(0,212,255,0.2)","--glow2":"rgba(255,0,255,0.15)","--shadow":"rgba(10,10,26,0.9)","--pill-bg":"rgba(18,18,42,0.9)","--pill-border":"rgba(100,100,255,0.4)"},stars:true},
  arctic:{
    n:{en:"â˜ï¸ Arctic",fr:"â˜ï¸ Arctique",ar:"â˜ï¸ Ù‚Ø·Ø¨ÙŠ"},
    v:{"--bg":"#e8eef4","--panel":"rgba(255,255,255,0.95)","--card":"rgba(255,255,255,0.95)","--card-border":"rgba(100,130,170,0.25)","--accent":"#2563eb","--accent-soft":"rgba(37,99,235,0.12)","--accent-strong":"rgba(37,99,235,0.6)","--accent2":"#06b6d4","--text":"#1e293b","--muted":"#64748b","--border":"#cbd5e1","--editor-bg":"rgba(241,245,249,0.9)","--btn-grad":"linear-gradient(135deg,#2563eb,#3b82f6)","--glow1":"rgba(37,99,235,0.08)","--glow2":"rgba(6,182,212,0.06)","--shadow":"rgba(100,116,139,0.15)","--pill-bg":"rgba(255,255,255,0.9)","--pill-border":"rgba(100,130,170,0.3)"},stars:false},
  blaze:{
    n:{en:"ğŸ”¥ Blaze",fr:"ğŸ”¥ Brasier",ar:"ğŸ”¥ Ù„Ù‡Ø¨"},
    v:{"--bg":"#1a0500","--panel":"rgba(30,8,0,0.96)","--card":"rgba(40,12,0,0.9)","--card-border":"rgba(255,100,0,0.2)","--accent":"#ff6600","--accent-soft":"rgba(255,102,0,0.12)","--accent-strong":"rgba(255,102,0,0.7)","--accent2":"#ffcc00","--text":"#ffeedd","--muted":"#ffaa66","--border":"#3d1500","--editor-bg":"rgba(20,5,0,0.8)","--btn-grad":"linear-gradient(135deg,#ff6600,#ff9100)","--glow1":"rgba(255,102,0,0.15)","--glow2":"rgba(255,204,0,0.1)","--shadow":"rgba(20,5,0,0.9)","--pill-bg":"rgba(30,8,0,0.9)","--pill-border":"rgba(255,140,0,0.3)"},stars:false},
  ocean:{
    n:{en:"ğŸŒŠ Ocean",fr:"ğŸŒŠ OcÃ©an",ar:"ğŸŒŠ Ù…Ø­ÙŠØ·"},
    v:{"--bg":"#001f3f","--panel":"rgba(0,31,63,0.96)","--card":"rgba(0,50,90,0.8)","--card-border":"rgba(0,180,255,0.2)","--accent":"#00e5ff","--accent-soft":"rgba(0,229,255,0.12)","--accent-strong":"rgba(0,229,255,0.6)","--accent2":"#18ffff","--text":"#e0f7fa","--muted":"#80deea","--border":"#003050","--editor-bg":"rgba(0,20,40,0.8)","--btn-grad":"linear-gradient(135deg,#00e5ff,#0091ea)","--glow1":"rgba(0,229,255,0.15)","--glow2":"rgba(0,145,234,0.1)","--shadow":"rgba(0,15,30,0.9)","--pill-bg":"rgba(0,31,63,0.9)","--pill-border":"rgba(0,180,255,0.3)"},stars:false},
  dragon:{
    n:{en:"ğŸ‰ Dragon",fr:"ğŸ‰ Dragon",ar:"ğŸ‰ ØªÙ†ÙŠÙ†"},
    v:{"--bg":"#1a0a2e","--panel":"rgba(26,10,46,0.96)","--card":"rgba(45,15,60,0.8)","--card-border":"rgba(168,85,247,0.2)","--accent":"#a855f7","--accent-soft":"rgba(168,85,247,0.12)","--accent-strong":"rgba(168,85,247,0.6)","--accent2":"#ffcc00","--text":"#f3e8ff","--muted":"#c084fc","--border":"#2d0a3e","--editor-bg":"rgba(18,8,32,0.8)","--btn-grad":"linear-gradient(135deg,#a855f7,#7c3aed)","--glow1":"rgba(168,85,247,0.15)","--glow2":"rgba(255,204,0,0.08)","--shadow":"rgba(15,5,30,0.9)","--pill-bg":"rgba(26,10,46,0.9)","--pill-border":"rgba(168,85,247,0.3)"},stars:true},
  cyber:{
    n:{en:"ğŸ¤– Cyber",fr:"ğŸ¤– Cyber",ar:"ğŸ¤– Ø³Ø§ÙŠØ¨Ø±"},
    v:{"--bg":"#0a0a0a","--panel":"rgba(8,15,8,0.96)","--card":"rgba(0,30,0,0.7)","--card-border":"rgba(0,255,65,0.15)","--accent":"#00ff41","--accent-soft":"rgba(0,255,65,0.1)","--accent-strong":"rgba(0,255,65,0.5)","--accent2":"#39ff14","--text":"#b0ffb0","--muted":"#4ade80","--border":"#0d1a0d","--editor-bg":"rgba(5,10,5,0.8)","--btn-grad":"linear-gradient(135deg,#00ff41,#00cc33)","--glow1":"rgba(0,255,65,0.12)","--glow2":"rgba(57,255,20,0.08)","--shadow":"rgba(0,0,0,0.9)","--pill-bg":"rgba(5,15,5,0.9)","--pill-border":"rgba(0,255,65,0.25)"},stars:false},
  ninja:{
    n:{en:"ğŸ¥· Ninja",fr:"ğŸ¥· Ninja",ar:"ğŸ¥· Ù†ÙŠÙ†Ø¬Ø§"},
    v:{"--bg":"#1a1a1a","--panel":"rgba(20,20,20,0.97)","--card":"rgba(35,35,35,0.9)","--card-border":"rgba(255,68,68,0.2)","--accent":"#ff4444","--accent-soft":"rgba(255,68,68,0.1)","--accent-strong":"rgba(255,68,68,0.6)","--accent2":"#ff8c00","--text":"#f0f0f0","--muted":"#ff8c8c","--border":"#2d2d2d","--editor-bg":"rgba(15,15,15,0.8)","--btn-grad":"linear-gradient(135deg,#ff4444,#ff8c00)","--glow1":"rgba(255,68,68,0.12)","--glow2":"rgba(255,140,0,0.08)","--shadow":"rgba(0,0,0,0.9)","--pill-bg":"rgba(20,20,20,0.9)","--pill-border":"rgba(255,68,68,0.3)"},stars:false},
  islamic:{
    n:{en:"ğŸ•Œ Heritage",fr:"ğŸ•Œ HÃ©ritage",ar:"ğŸ•Œ ØªØ±Ø§Ø« Ø¥Ø³Ù„Ø§Ù…ÙŠ"},
    v:{"--bg":"#0a1a0a","--panel":"rgba(10,30,15,0.96)","--card":"rgba(15,45,25,0.85)","--card-border":"rgba(212,175,55,0.25)","--accent":"#d4af37","--accent-soft":"rgba(212,175,55,0.12)","--accent-strong":"rgba(212,175,55,0.6)","--accent2":"#2e8b57","--text":"#f0ead6","--muted":"#c5b358","--border":"#1a3a1a","--editor-bg":"rgba(5,15,8,0.8)","--btn-grad":"linear-gradient(135deg,#d4af37,#b8860b)","--glow1":"rgba(212,175,55,0.12)","--glow2":"rgba(46,139,87,0.1)","--shadow":"rgba(5,15,5,0.9)","--pill-bg":"rgba(10,30,15,0.9)","--pill-border":"rgba(212,175,55,0.3)"},stars:true}
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   I18N + LESSONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const B='basics',S='science';
// Placeholder for closing script tag â€” replaced at runtime
const sc='{{/SC}}';

function mkI18N(){
const UI={
en:{dir:'ltr',sub:'Play â€¢ Learn â€¢ Create',run:'ğŸš€ Launch',reset:'â†º Reset',tryIt:'Try it',output:'Result',prev:'â—€',next:'â–¶',hint:'ğŸ’¡',congrats:'â­ Amazing!',track1:'Basics',track2:'Science',
tiers:{html:'ğŸ—ï¸ Build (HTML)',css:'ğŸ¨ Style (CSS)',js:'âš¡ Power (JS)',ctrl:'ğŸ›ï¸ Controls',beg:'ğŸŸ¢ Beginner',exp:'ğŸ”µ Explorer',adv:'ğŸ”´ Advanced'}},
fr:{dir:'ltr',sub:'Joue â€¢ Apprends â€¢ CrÃ©e',run:'ğŸš€ Lancer',reset:'â†º Reset',tryIt:'Essaie',output:'RÃ©sultat',prev:'â—€',next:'â–¶',hint:'ğŸ’¡',congrats:'â­ Bravo!',track1:'Bases',track2:'Science',
tiers:{html:'ğŸ—ï¸ Construis (HTML)',css:'ğŸ¨ DÃ©core (CSS)',js:'âš¡ Anime (JS)',ctrl:'ğŸ›ï¸ ContrÃ´les',beg:'ğŸŸ¢ DÃ©butant',exp:'ğŸ”µ Explorateur',adv:'ğŸ”´ AvancÃ©'}},
ar:{dir:'rtl',sub:'Ø§Ù„Ø¹Ø¨ â€¢ ØªØ¹Ù„Ù‘Ù… â€¢ Ø§Ø¨ØªÙƒØ±',run:'ğŸš€ Ø¥Ù†Ø·Ù„Ù‚',reset:'â†º Ø¥Ø¹Ø§Ø¯Ø©',tryIt:'Ø¬Ø±Ù‘Ø¨',output:'Ø§Ù„Ù†ØªÙŠØ¬Ø©',prev:'â–¶',next:'â—€',hint:'ğŸ’¡',congrats:'â­ Ø£Ø­Ø³Ù†Øª!',track1:'Ø£Ø³Ø§Ø³ÙŠØ§Øª',track2:'Ø¹Ù„ÙˆÙ…',
tiers:{html:'(HTML) ğŸ—ï¸ Ø§Ø¨Ù†Ù',css:'(CSS) ğŸ¨ Ø²ÙŠÙ‘Ù†',js:'(JS) âš¡ Ø­Ø±Ù‘Ùƒ',ctrl:'ğŸ›ï¸ Ø¹Ù†Ø§ØµØ± ØªØ­ÙƒÙ…',beg:'ğŸŸ¢ Ù…Ø¨ØªØ¯Ø¦',exp:'ğŸ”µ Ù…Ø³ØªÙƒØ´Ù',adv:'ğŸ”´ Ù…ØªÙ‚Ø¯Ù…'}}
};
// --- BASICS LESSONS ---
const basicsEN=[
{g:'html',t:'ğŸ  My First Page',d:'Start with HTML tags!',h:'Change the text!',
c:'<!DOCTYPE html>\n<html><body>\n  <h1>Hello World!</h1>\n  <p>My first webpage!</p>\n  <p>I am learning HTML!</p>\n</body></html>'},
{g:'html',t:'ğŸ“ Cool Lists',d:'Make lists of favorites!',h:'Add more <li> items!',
c:'<!DOCTYPE html>\n<html><body>\n  <h2>My Top Games ğŸ®</h2>\n  <ol><li>Minecraft</li><li>Roblox</li><li>Fortnite</li></ol>\n  <h2>My Skills ğŸ’ª</h2>\n  <ul><li>Coding</li><li>Gaming</li><li>Drawing</li></ul>\n</body></html>'},
{g:'html',t:'ğŸ–¼ï¸ Images & Links',d:'Add pictures and links!',h:'Change the URL!',
c:'<!DOCTYPE html>\n<html><body>\n  <h1>Cool Space ğŸš€</h1>\n  <img src="https://placekitten.com/300/200" width="300">\n  <p>Did you know?</p>\n  <a href="https://nasa.gov">Visit NASA! ğŸŒ</a>\n</body></html>'},
{g:'css',t:'ğŸ¨ Paint Your Page',d:'Add awesome colors!',h:'Try crimson, gold, dodgerblue!',
c:'<!DOCTYPE html>\n<html><body>\n  <h1 style="color:dodgerblue;font-size:48px;text-shadow:3px 3px orange">SUPER CODER!</h1>\n  <p style="background:gold;padding:20px;border-radius:15px;font-size:24px">ğŸ† Level Up! ğŸ†</p>\n</body></html>'},
{g:'css',t:'ğŸ“¦ Game Cards',d:'RPG cards with effects!',h:'Change border-radius to 50%!',
c:'<!DOCTYPE html>\n<html><head><style>\n.card{width:200px;padding:20px;margin:20px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px;color:#fff;font-family:Arial;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.3);display:inline-block;transition:transform .2s}\n.card:hover{transform:scale(1.08) rotate(-2deg)}\n</style></head><body>\n<div class="card"><h2>âš”ï¸ Warrior</h2><p>HP:100</p><p>ATK:75</p></div>\n<div class="card" style="background:linear-gradient(135deg,#f093fb,#f5576c)"><h2>ğŸ§™ Mage</h2><p>HP:60</p><p>MP:120</p></div>\n</body></html>'},
{g:'css',t:'ğŸŒ€ Animations',d:'Make things spin & bounce!',h:'Change animation duration!',
c:'<!DOCTYPE html>\n<html><head><style>\n@keyframes spin{to{transform:rotate(360deg)}}\n@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-60px)}}\n@keyframes rainbow{0%{color:red}25%{color:orange}50%{color:dodgerblue}75%{color:lime}100%{color:red}}\n.spin{display:inline-block;font-size:60px;animation:spin 2s linear infinite}\n.bounce{display:inline-block;font-size:60px;animation:bounce 1s ease infinite}\n.rbow{font-size:36px;font-weight:bold;font-family:Arial;animation:rainbow 2s linear infinite}\n</style></head><body style="text-align:center;padding-top:40px">\n<div class="spin">âš™ï¸</div><div class="bounce">ğŸš€</div><div class="spin">â­</div><br><br>\n<div class="rbow">I AM A CODER!</div>\n</body></html>'},
{g:'js',t:'âš¡ Click Power!',d:'Buttons that DO things!',h:'Change the alert messages!',
c:'<!DOCTYPE html>\n<html><head><style>\nbtn{padding:15px 30px;font-size:20px;border:none;border-radius:12px;cursor:pointer;margin:10px;color:#fff;font-weight:bold}\n</style></head><body style="text-align:center;padding:30px;font-family:Arial">\n<h1>ğŸ® Button Quest</h1>\n<button style="background:#e74c3c" onclick="alert(\'ğŸ”¥ FIRE!\')">ğŸ”¥ Fire</button>\n<button style="background:#3498db" onclick="alert(\'ğŸ’§ WATER!\')">ğŸ’§ Water</button>\n<button style="background:#2ecc71" onclick="alert(\'ğŸŒ¿ HEAL!\')">ğŸŒ¿ Nature</button>\n<p id="s">Score: 0</p>\n<button style="background:#9b59b6;padding:12px 24px;border:none;border-radius:12px;color:#fff;font-size:18px;cursor:pointer" onclick="document.getElementById(\'s\').innerText=\'Score: \'+Math.floor(Math.random()*100)">ğŸ² Roll!</button>\n</body></html>'},
{g:'js',t:'ğŸ§® Calculator',d:'Build a calculator!',h:'Add a divide button!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;text-align:center;padding:20px}\ninput{padding:12px;font-size:20px;width:80px;border-radius:10px;border:3px solid #3498db;text-align:center}\nbutton{padding:12px 24px;font-size:18px;border:none;border-radius:10px;background:#e74c3c;color:#fff;cursor:pointer;margin:5px}\n#r{font-size:36px;margin:20px;color:#2ecc71}\n</style></head><body>\n<h1>ğŸ§® Super Calc</h1>\n<input id="a" type="number" value="10"> <input id="b" type="number" value="5"><br><br>\n<button onclick="calc(\'+\')">â•</button><button onclick="calc(\'-\')">â–</button><button onclick="calc(\'*\')">âœ–ï¸</button>\n<div id="r">?</div>\n<script>function calc(o){var a=+document.getElementById("a").value,b=+document.getElementById("b").value;document.getElementById("r").innerText="= "+(o==="+"?a+b:o==="-"?a-b:a*b)}'+sc+'\n</body></html>'},
{g:'js',t:'ğŸ® Monster Clicker',d:'Your own clicker game!',h:'Add new upgrades!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;text-align:center;background:#1a1a2e;color:#fff;padding:20px}\n.c{font-size:80px;cursor:pointer;user-select:none;transition:transform .1s;display:inline-block}\n.c:active{transform:scale(1.3)}\nbutton{padding:12px 24px;font-size:16px;border:none;border-radius:10px;background:#e74c3c;color:#fff;cursor:pointer;margin:8px}\n#s{font-size:48px;color:gold}\n</style></head><body>\n<h1>âš”ï¸ Monster Clicker</h1>\n<div id="s">0 Gold</div>\n<div class="c" onclick="c()">ğŸ‘¾</div><br><br>\n<button onclick="buy()">ğŸ—¡ï¸ Sword (10g)</button>\n<p id="d">Damage: 1/click</p>\n<script>var g=0,dm=1;function c(){g+=dm;document.getElementById("s").innerText=g+" Gold"}function buy(){if(g>=10){g-=10;dm++;document.getElementById("s").innerText=g+" Gold";document.getElementById("d").innerText="Damage: "+dm+"/click"}}'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸšï¸ Slider Control',d:'Sliders change things live!',h:'Add more sliders for width/height!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;text-align:center;padding:20px;background:#111;color:#fff}\ninput[type=range]{width:250px;margin:10px}\n.box{width:100px;height:100px;border-radius:10px;margin:20px auto;transition:all .3s}\n</style></head><body>\n<h2>ğŸšï¸ Color Mixer</h2>\n<label>Red: <input type="range" id="r" min="0" max="255" value="100" oninput="upd()"></label><br>\n<label>Green: <input type="range" id="g" min="0" max="255" value="200" oninput="upd()"></label><br>\n<label>Blue: <input type="range" id="b" min="0" max="255" value="255" oninput="upd()"></label><br>\n<label>Size: <input type="range" id="sz" min="50" max="300" value="100" oninput="upd()"></label>\n<div class="box" id="box"></div>\n<p id="val"></p>\n<script>function upd(){var r=document.getElementById("r").value,g=document.getElementById("g").value,b=document.getElementById("b").value,s=document.getElementById("sz").value,bx=document.getElementById("box");bx.style.background="rgb("+r+","+g+","+b+")";bx.style.width=s+"px";bx.style.height=s+"px";document.getElementById("val").innerText="rgb("+r+","+g+","+b+") "+s+"px"}upd()'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ•¹ï¸ Joystick',d:'Drag to move things!',h:'Change the speed or arena size!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{margin:0;background:#111;overflow:hidden;font-family:Arial}\n#arena{position:relative;width:100vw;height:100vh}\n#dot{position:absolute;width:30px;height:30px;background:#0f0;border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 0 20px #0f0}\n#joy{position:fixed;bottom:30px;right:30px;width:120px;height:120px;background:rgba(255,255,255,0.1);border-radius:50%;border:2px solid rgba(255,255,255,0.3)}\n#knob{position:absolute;width:40px;height:40px;background:#0f0;border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%);cursor:grab;box-shadow:0 0 15px rgba(0,255,0,0.5)}\n#pos{position:fixed;top:10px;left:10px;color:#0f0;font-size:14px;font-family:monospace}\n</style></head><body>\n<div id="arena"><div id="dot"></div></div>\n<div id="joy"><div id="knob"></div></div>\n<div id="pos">X:0 Y:0</div>\n<script>var dx=0,dy=0,px=window.innerWidth/2,py=window.innerHeight/2,drag=false,knob=document.getElementById("knob"),joy=document.getElementById("joy");joy.onmousedown=joy.ontouchstart=function(e){drag=true;e.preventDefault()};document.onmouseup=document.ontouchend=function(){drag=false;dx=dy=0;knob.style.transform="translate(-50%,-50%)"};document.onmousemove=document.ontouchmove=function(e){if(!drag)return;var t=e.touches?e.touches[0]:e,r=joy.getBoundingClientRect(),cx=r.left+60,cy=r.top+60,ox=t.clientX-cx,oy=t.clientY-cy,d=Math.min(Math.sqrt(ox*ox+oy*oy),40);var a=Math.atan2(oy,ox);dx=Math.cos(a)*d/40*3;dy=Math.sin(a)*d/40*3;knob.style.transform="translate(calc(-50% + "+Math.cos(a)*d+"px),calc(-50% + "+Math.sin(a)*d+"px))"};setInterval(function(){px=Math.max(15,Math.min(window.innerWidth-15,px+dx));py=Math.max(15,Math.min(window.innerHeight-15,py+dy));var dot=document.getElementById("dot");dot.style.left=px+"px";dot.style.top=py+"px";document.getElementById("pos").innerText="X:"+Math.round(px)+" Y:"+Math.round(py)},16)'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ“Š Bar Chart',d:'Data becomes visual!',h:'Change the numbers in the array!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;padding:20px;text-align:center}\n.chart{display:flex;align-items:flex-end;justify-content:center;gap:12px;height:250px;margin:20px auto;padding:10px;border-bottom:2px solid #333}\n.bar-wrap{display:flex;flex-direction:column;align-items:center;gap:4px}\n.bar{width:50px;border-radius:8px 8px 0 0;transition:height .5s,background .5s;cursor:pointer}\n.bar:hover{opacity:0.8}\n.label{font-size:12px;color:#999}\n.val{font-size:14px;font-weight:bold}\n</style></head><body>\n<h2>ğŸ“Š Game Scores</h2>\n<div class="chart" id="chart"></div>\n<button onclick="randomize()" style="padding:12px 24px;background:#3b82f6;color:#fff;border:none;border-radius:10px;font-size:16px;cursor:pointer;margin:10px">ğŸ² Randomize</button>\n<script>var names=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],colors=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"],data=[45,72,38,91,56,83,67];function draw(){var c=document.getElementById("chart");c.innerHTML="";var mx=Math.max.apply(null,data);data.forEach(function(v,i){var w=document.createElement("div");w.className="bar-wrap";var b=document.createElement("div");b.className="bar";b.style.height=(v/mx*200)+"px";b.style.background=colors[i];var vl=document.createElement("div");vl.className="val";vl.innerText=v;var lb=document.createElement("div");lb.className="label";lb.innerText=names[i];w.appendChild(vl);w.appendChild(b);w.appendChild(lb);c.appendChild(w)})}function randomize(){data=data.map(function(){return Math.floor(Math.random()*100)+10});draw()}draw()'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ”˜ Gauge Meter',d:'A speedometer gauge!',h:'Change max value or colors!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:30px}\ncanvas{display:block;margin:10px auto}\ninput[type=range]{width:250px;margin:15px}\n</style></head><body>\n<h2>ğŸ”˜ Speed Gauge</h2>\n<canvas id="g" width="300" height="180"></canvas>\n<div id="val" style="font-size:36px;font-weight:bold;color:#0f0">0</div>\n<input type="range" id="sl" min="0" max="100" value="0" oninput="draw(this.value)">\n<script>var cv=document.getElementById("g"),cx=cv.getContext("2d");function draw(v){cx.clearRect(0,0,300,180);cx.beginPath();cx.arc(150,160,120,Math.PI,2*Math.PI);cx.strokeStyle="#333";cx.lineWidth=20;cx.stroke();var pct=v/100;var col=pct<0.5?"#22c55e":pct<0.8?"#eab308":"#ef4444";cx.beginPath();cx.arc(150,160,120,Math.PI,Math.PI+pct*Math.PI);cx.strokeStyle=col;cx.lineWidth=20;cx.lineCap="round";cx.stroke();cx.beginPath();var a=Math.PI+pct*Math.PI;cx.moveTo(150,160);cx.lineTo(150+Math.cos(a)*100,160+Math.sin(a)*100);cx.strokeStyle="#fff";cx.lineWidth=3;cx.stroke();cx.beginPath();cx.arc(150,160,8,0,2*Math.PI);cx.fillStyle="#fff";cx.fill();document.getElementById("val").innerText=v;document.getElementById("val").style.color=col}draw(0)'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ”˜ Toggle Switch',d:'On/Off like a light switch!',h:'Add more toggles for different lights!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:30px}\n.sw{width:60px;height:32px;border-radius:16px;background:#333;position:relative;display:inline-block;cursor:pointer;transition:background .3s;margin:10px}\n.sw.on{background:#22c55e}\n.sw::after{content:\"\";position:absolute;width:28px;height:28px;border-radius:50%;background:#fff;top:2px;left:2px;transition:left .3s}\n.sw.on::after{left:30px}\n.bulb{font-size:80px;transition:all .3s;filter:brightness(0.3)}\n.bulb.lit{filter:brightness(1.5) drop-shadow(0 0 30px gold)}\n#val{font-family:monospace;color:#888;margin:10px}\n</style></head><body>\n<h2>ğŸ”˜ Toggle Switch</h2>\n<div class=\"bulb\" id=\"b\">ğŸ’¡</div>\n<div class=\"sw\" id=\"sw\" onclick=\"tog()\"></div>\n<div id=\"val\">State: OFF (false)</div>\n<script>var on=false;function tog(){on=!on;document.getElementById(\"sw\").className=on?\"sw on\":\"sw\";document.getElementById(\"b\").className=on?\"bulb lit\":\"bulb\";document.getElementById(\"val\").innerText=\"State: \"+(on?\"ON (true)\":\"OFF (false)\")}'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ”² Checkbox Group',d:'Multi-select your pizza!',h:'Add more toppings!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;padding:20px;text-align:center}\n.opt{display:flex;align-items:center;gap:10px;padding:8px;margin:4px auto;max-width:250px;background:rgba(255,255,255,0.05);border-radius:10px;cursor:pointer}\n.cb{width:24px;height:24px;border-radius:6px;border:2px solid #555;display:flex;align-items:center;justify-content:center;font-size:16px;transition:all .2s;flex-shrink:0}\n.cb.on{background:#22c55e;border-color:#22c55e}\n#order{margin:15px;padding:15px;background:rgba(255,255,255,0.05);border-radius:12px;font-size:18px}\n</style></head><body>\n<h2>ğŸ• Pizza Builder</h2>\n<div id=\"opts\"></div>\n<div id=\"order\">Your pizza: Plain</div>\n<script>var items=[[\"ğŸ§€\",\"Cheese\",2],[\"ğŸ„\",\"Mushroom\",1.5],[\"ğŸ«‘\",\"Peppers\",1],[\"ğŸ¥“\",\"Bacon\",2.5],[\"ğŸ«’\",\"Olives\",1],[\"ğŸŒ¶ï¸\",\"JalapeÃ±o\",1]],sel={};var od=document.getElementById(\"opts\");items.forEach(function(it,i){var d=document.createElement(\"div\");d.className=\"opt\";d.innerHTML=\'<div class=\"cb\" id=\"cb\'+i+\'\"></div><span>\'+it[0]+\" \"+it[1]+\'</span><span style=\"margin-left:auto;color:#888\">$\'+it[2].toFixed(2)+\"</span>\";d.onclick=function(){sel[i]=!sel[i];document.getElementById(\"cb\"+i).className=sel[i]?\"cb on\":\"cb\";document.getElementById(\"cb\"+i).innerText=sel[i]?\"âœ“\":\"\";upd()};od.appendChild(d)});function upd(){var t=[],p=8;items.forEach(function(it,i){if(sel[i]){t.push(it[0]);p+=it[2]}});document.getElementById(\"order\").innerHTML=t.length?\"Your pizza: \"+t.join(\" \")+\"<br><b>Total: $\"+p.toFixed(2)+\"</b>\":\"Your pizza: Plain<br><b>$8.00</b>\"}'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ”´ Radio Buttons',d:'Pick one â€” page changes!',h:'Add more color options!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px;transition:background .5s}\n.group{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;margin:15px}\n.rb{padding:12px 20px;border-radius:999px;border:2px solid #333;cursor:pointer;transition:all .3s;font-size:16px}\n.rb.sel{border-width:3px;transform:scale(1.1)}\n#preview{width:120px;height:120px;border-radius:20px;margin:20px auto;transition:all .5s;box-shadow:0 10px 30px rgba(0,0,0,0.3)}\n#val{font-family:monospace;color:#888}\n</style></head><body>\n<h2>ğŸ”´ Pick a Theme Color</h2>\n<div class=\"group\" id=\"grp\"></div>\n<div id=\"preview\"></div>\n<div id=\"val\">Selected: none</div>\n<script>var colors=[[\"#ef4444\",\"Red\"],[\"#f97316\",\"Orange\"],[\"#eab308\",\"Yellow\"],[\"#22c55e\",\"Green\"],[\"#3b82f6\",\"Blue\"],[\"#8b5cf6\",\"Purple\"],[\"#ec4899\",\"Pink\"]];var g=document.getElementById(\"grp\");colors.forEach(function(c,i){var d=document.createElement(\"div\");d.className=\"rb\";d.style.borderColor=c[0];d.innerText=c[1];d.onclick=function(){document.querySelectorAll(\".rb\").forEach(function(e,j){e.className=j===i?\"rb sel\":\"rb\";e.style.background=j===i?c[0]:\"transparent\"});document.body.style.background=\"linear-gradient(180deg,#111,\"+c[0]+\"33)\";document.getElementById(\"preview\").style.background=c[0];document.getElementById(\"val\").innerText=\"Selected: \"+c[1]+\" (\"+c[0]+\")\"};g.appendChild(d)})'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ“ Tooltip Slider',d:'A bubble follows the thumb!',h:'Change min/max values!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:30px}\n.slider-wrap{position:relative;width:300px;margin:40px auto}\ninput[type=range]{width:100%;-webkit-appearance:none;background:linear-gradient(90deg,#22c55e,#3b82f6);height:8px;border-radius:4px}\ninput[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:24px;height:24px;border-radius:50%;background:#fff;cursor:pointer}\n.tip{position:absolute;top:-40px;padding:4px 12px;background:#22c55e;color:#fff;border-radius:8px;font-weight:bold;transform:translateX(-50%);transition:left .1s;pointer-events:none}\n.tip::after{content:\"\";position:absolute;bottom:-6px;left:50%;transform:translateX(-50%);border:6px solid transparent;border-top-color:#22c55e}\n</style></head><body>\n<h2>ğŸ“ Tooltip Slider</h2>\n<div class=\"slider-wrap\">\n<div class=\"tip\" id=\"tip\">50</div>\n<input type=\"range\" id=\"sl\" min=\"0\" max=\"100\" value=\"50\" oninput=\"upd()\">\n</div>\n<div id=\"out\" style=\"font-size:48px;margin:20px\">50</div>\n<p style=\"color:#888\">Volume Control</p>\n<script>function upd(){var v=+document.getElementById(\"sl\").value;document.getElementById(\"tip\").innerText=v;document.getElementById(\"tip\").style.left=(v)+\"%\";document.getElementById(\"tip\").style.background=\"hsl(\"+(120-v*1.2)+\",70%,45%)\";document.getElementById(\"out\").innerText=v;document.getElementById(\"out\").style.fontSize=(30+v*0.4)+\"px\"}upd()'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ”¢ Stepper Counter',d:'Plus/Minus with limits!',h:'Change the min/max limits!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px}\n.stepper{display:flex;align-items:center;justify-content:center;margin:20px}\n.stepper button{width:60px;height:60px;font-size:28px;border:none;background:#333;color:#fff;cursor:pointer}\n.stepper button:first-child{border-radius:12px 0 0 12px}\n.stepper button:last-child{border-radius:0 12px 12px 0}\n#val{width:100px;font-size:48px;font-weight:bold;background:#222;padding:10px;font-family:monospace}\n.items{display:flex;justify-content:center;gap:5px;margin:15px;flex-wrap:wrap}\n.item{font-size:30px;animation:pop .3s}\n@keyframes pop{from{transform:scale(0)}to{transform:scale(1)}}\n#total{font-size:24px;color:#22c55e}\n</style></head><body>\n<h2>ğŸ”¢ Item Counter</h2>\n<p style=\"color:#888\">How many players? (1-10)</p>\n<div class=\"stepper\">\n<button onclick=\"adj(-1)\">âˆ’</button>\n<div id=\"val\">1</div>\n<button onclick=\"adj(1)\">+</button>\n</div>\n<div class=\"items\" id=\"items\"></div>\n<div id=\"total\">1 player</div>\n<script>var n=1;function adj(d){n=Math.max(1,Math.min(10,n+d));document.getElementById(\"val\").innerText=n;var it=document.getElementById(\"items\");it.innerHTML=\"\";for(var i=0;i<n;i++){var s=document.createElement(\"span\");s.className=\"item\";s.innerText=\"ğŸ§‘\";it.appendChild(s)}document.getElementById(\"total\").innerText=n+\" player\"+(n>1?\"s\":\"\")}adj(0)'+sc+'\n</body></html>'},
{g:'ctrl',t:'â­ Star Rating',d:'Click to rate 1-5!',h:'Change from stars to hearts!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:30px}\n.stars{display:flex;justify-content:center;gap:8px;margin:20px}\n.star{font-size:50px;cursor:pointer;transition:all .2s;filter:grayscale(1) brightness(0.4)}\n.star:hover{transform:scale(1.2)}\n.star.on{filter:none;text-shadow:0 0 20px gold}\n#msg{font-size:24px;margin:15px;min-height:36px}\n#bar{width:200px;height:12px;border-radius:6px;background:#333;margin:10px auto;overflow:hidden}\n#fill{height:100%;border-radius:6px;background:linear-gradient(90deg,#ef4444,#eab308,#22c55e);transition:width .3s}\n</style></head><body>\n<h2>â­ Rate This Game</h2>\n<div class=\"stars\" id=\"stars\"></div>\n<div id=\"msg\"></div>\n<div id=\"bar\"><div id=\"fill\" style=\"width:0%\"></div></div>\n<script>var rating=0,msgs=[\"\",\"ğŸ˜ Terrible\",\"ğŸ˜ Meh\",\"ğŸ™‚ OK\",\"ğŸ˜Š Great!\",\"ğŸ¤© Amazing!\"];var st=document.getElementById(\"stars\");for(var i=1;i<=5;i++){var s=document.createElement(\"div\");s.className=\"star\";s.innerText=\"â­\";s.setAttribute(\"data-v\",i);s.onmouseenter=function(){hi(+this.getAttribute(\"data-v\"))};s.onmouseleave=function(){hi(rating)};s.onclick=function(){rating=+this.getAttribute(\"data-v\");hi(rating);document.getElementById(\"msg\").innerText=msgs[rating]};st.appendChild(s)}function hi(n){document.querySelectorAll(\".star\").forEach(function(s,i){s.className=i<n?\"star on\":\"star\"});document.getElementById(\"fill\").style.width=(n*20)+\"%\"}'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ¨ Color Picker',d:'Mix RGB colors!',h:'Try making pure white or black!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px}\n.sl{display:flex;align-items:center;gap:10px;margin:8px auto;max-width:320px}\n.sl label{width:20px;font-weight:bold;font-size:18px}\n.sl input{flex:1}\n.preview{width:150px;height:150px;border-radius:20px;margin:15px auto;transition:all .3s;box-shadow:0 10px 40px rgba(0,0,0,0.5)}\n#hex{font-family:monospace;font-size:24px;background:#222;padding:8px 16px;border-radius:8px;display:inline-block;margin:8px}\n</style></head><body>\n<h2>ğŸ¨ Color Picker</h2>\n<div class=\"sl\"><label style=\"color:#ff4444\">R</label><input type=\"range\" id=\"r\" min=\"0\" max=\"255\" value=\"100\" oninput=\"upd()\"><span id=\"rv\">100</span></div>\n<div class=\"sl\"><label style=\"color:#22c55e\">G</label><input type=\"range\" id=\"g\" min=\"0\" max=\"255\" value=\"200\" oninput=\"upd()\"><span id=\"gv\">200</span></div>\n<div class=\"sl\"><label style=\"color:#3b82f6\">B</label><input type=\"range\" id=\"b\" min=\"0\" max=\"255\" value=\"255\" oninput=\"upd()\"><span id=\"bv\">255</span></div>\n<div class=\"preview\" id=\"prev\"></div>\n<div id=\"hex\">#64C8FF</div>\n<div id=\"rgb\" style=\"color:#888\">rgb(100, 200, 255)</div>\n<script>function upd(){var r=+document.getElementById(\"r\").value,g=+document.getElementById(\"g\").value,b=+document.getElementById(\"b\").value;document.getElementById(\"rv\").innerText=r;document.getElementById(\"gv\").innerText=g;document.getElementById(\"bv\").innerText=b;document.getElementById(\"prev\").style.background=\"rgb(\"+r+\",\"+g+\",\"+b+\")\";var h=\"#\"+[r,g,b].map(function(v){return v.toString(16).padStart(2,\"0\")}).join(\"\").toUpperCase();document.getElementById(\"hex\").innerText=h;document.getElementById(\"rgb\").innerText=\"rgb(\"+r+\", \"+g+\", \"+b+\")\"}upd()'+sc+'\n</body></html>'},
{g:'ctrl',t:'â±ï¸ Stopwatch',d:'Precision timing!',h:'Add a countdown mode!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px}\n#time{font-size:64px;font-family:monospace;font-weight:bold;margin:20px;color:#22c55e}\nbutton{padding:12px 24px;font-size:16px;border:none;border-radius:999px;cursor:pointer;margin:5px;font-weight:bold}\n.start{background:#22c55e;color:#000}\n.stop{background:#ef4444;color:#fff}\n.lap{background:#3b82f6;color:#fff}\n.reset{background:#333;color:#fff}\n#laps{max-height:200px;overflow-y:auto;margin:15px auto;max-width:300px}\n.lap-item{padding:6px 12px;margin:3px 0;background:rgba(255,255,255,0.05);border-radius:8px;font-family:monospace;display:flex;justify-content:space-between}\n</style></head><body>\n<h2>â±ï¸ Stopwatch</h2>\n<div id=\"time\">00:00.000</div>\n<button class=\"start\" onclick=\"go()\">â–¶ Start</button>\n<button class=\"stop\" onclick=\"stp()\">â¸ Stop</button>\n<button class=\"lap\" onclick=\"lap()\">ğŸ Lap</button>\n<button class=\"reset\" onclick=\"rst()\">â†º Reset</button>\n<div id=\"laps\"></div>\n<script>var t0=0,elapsed=0,running=false,timer,laps=[];function fmt(ms){var m=Math.floor(ms/60000);var s=Math.floor((ms%60000)/1000);var ml=ms%1000;return String(m).padStart(2,\"0\")+\":\"+String(s).padStart(2,\"0\")+\".\"+String(ml).padStart(3,\"0\")}function tick(){elapsed=Date.now()-t0;document.getElementById(\"time\").innerText=fmt(elapsed)}function go(){if(!running){t0=Date.now()-elapsed;timer=setInterval(tick,10);running=true}}function stp(){if(running){clearInterval(timer);running=false}}function lap(){if(running){laps.push(elapsed);var d=document.getElementById(\"laps\");var div=document.createElement(\"div\");div.className=\"lap-item\";div.innerHTML=\"<span>Lap \"+laps.length+\"</span><span>\"+fmt(elapsed)+\"</span>\";d.insertBefore(div,d.firstChild)}}function rst(){stp();elapsed=0;laps=[];document.getElementById(\"time\").innerText=\"00:00.000\";document.getElementById(\"laps\").innerHTML=\"\"}'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸŒ¡ï¸ Thermometer',d:'Temperature gauge!',h:'Change the color thresholds!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px}\n.thermo{width:40px;height:200px;border-radius:20px;border:3px solid #444;margin:15px auto;position:relative;overflow:hidden;background:#222}\n.fill{position:absolute;bottom:0;width:100%;border-radius:0 0 17px 17px;transition:all .3s}\n.bulb{width:60px;height:60px;border-radius:50%;border:3px solid #444;margin:-5px auto 0;transition:all .3s}\n.temps{display:flex;justify-content:center;gap:30px;margin:15px;font-size:28px;font-weight:bold}\ninput[type=range]{width:250px;margin:15px}\n</style></head><body>\n<h2>ğŸŒ¡ï¸ Thermometer</h2>\n<div class=\"thermo\"><div class=\"fill\" id=\"fill\"></div></div>\n<div class=\"bulb\" id=\"bulb\"></div>\n<div class=\"temps\"><span id=\"c\">20Â°C</span><span id=\"f\">68Â°F</span></div>\n<input type=\"range\" id=\"sl\" min=\"-20\" max=\"50\" value=\"20\" oninput=\"upd()\">\n<div id=\"desc\" style=\"font-size:18px\">ğŸŒ¤ï¸ Pleasant</div>\n<script>function upd(){var t=+document.getElementById(\"sl\").value;var pct=(t+20)/70*100;var col=t<0?\"#3b82f6\":t<15?\"#06b6d4\":t<30?\"#22c55e\":t<40?\"#f97316\":\"#ef4444\";document.getElementById(\"fill\").style.height=pct+\"%\";document.getElementById(\"fill\").style.background=col;document.getElementById(\"bulb\").style.background=col;document.getElementById(\"bulb\").style.borderColor=col;document.getElementById(\"c\").innerText=t+\"Â°C\";document.getElementById(\"f\").innerText=Math.round(t*9/5+32)+\"Â°F\";var d=t<0?\"ğŸ¥¶ Freezing\":t<15?\"â„ï¸ Cold\":t<25?\"ğŸŒ¤ï¸ Pleasant\":t<35?\"â˜€ï¸ Warm\":\"ğŸ”¥ Hot!\";document.getElementById(\"desc\").innerText=d}upd()'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ”„ Progress Ring',d:'Animated circle progress!',h:'Change the ring color!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px}\nsvg{transform:rotate(-90deg)}\n.ring-bg{fill:none;stroke:#222;stroke-width:12}\n.ring-fg{fill:none;stroke-width:12;stroke-linecap:round;transition:stroke-dashoffset .5s,stroke .3s}\n#pct{font-size:48px;font-weight:bold;margin:-130px auto 80px;position:relative}\ninput[type=range]{width:250px;margin:15px}\n</style></head><body>\n<h2>ğŸ”„ Progress Ring</h2>\n<svg width=\"200\" height=\"200\"><circle class=\"ring-bg\" cx=\"100\" cy=\"100\" r=\"85\"/><circle class=\"ring-fg\" id=\"ring\" cx=\"100\" cy=\"100\" r=\"85\"/></svg>\n<div id=\"pct\">0%</div>\n<input type=\"range\" id=\"sl\" min=\"0\" max=\"100\" value=\"0\" oninput=\"upd()\">\n<div style=\"color:#888\">Upload Progress</div>\n<script>var circ=2*Math.PI*85;document.getElementById(\"ring\").style.strokeDasharray=circ;function upd(){var v=+document.getElementById(\"sl\").value;var off=circ*(1-v/100);document.getElementById(\"ring\").style.strokeDashoffset=off;var col=v<30?\"#ef4444\":v<70?\"#eab308\":\"#22c55e\";document.getElementById(\"ring\").style.stroke=col;document.getElementById(\"pct\").innerText=v+\"%\";document.getElementById(\"pct\").style.color=col}upd()'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ¹ Piano Keys',d:'Play notes with clicks!',h:'Add more octaves!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px}\n.piano{display:flex;justify-content:center;margin:20px}\n.key{width:50px;height:180px;background:#fff;border:1px solid #333;border-radius:0 0 8px 8px;cursor:pointer;display:flex;align-items:flex-end;justify-content:center;padding-bottom:10px;color:#999;font-size:11px}\n.key:active{background:#ddd}\n.black{width:34px;height:110px;background:#222;border-radius:0 0 6px 6px;margin:0 -17px;z-index:2;color:#666}\n.black:active{background:#444}\n#note{font-size:32px;margin:15px;color:#22c55e;font-family:monospace}\n</style></head><body>\n<h2>ğŸ¹ Piano</h2>\n<div class=\"piano\" id=\"piano\"></div>\n<div id=\"note\">Click a key!</div>\n<script>var notes=[[\"C\",261.6,0],[\"C#\",277.2,1],[\"D\",293.7,0],[\"D#\",311.1,1],[\"E\",329.6,0],[\"F\",349.2,0],[\"F#\",370.0,1],[\"G\",392.0,0],[\"G#\",415.3,1],[\"A\",440.0,0],[\"A#\",466.2,1],[\"B\",493.9,0],[\"C5\",523.3,0]];var keys=\"AWSEDFTGYHUJK\";var ctx;var p=document.getElementById(\"piano\");notes.forEach(function(n,i){var k=document.createElement(\"div\");k.className=n[2]?\"key black\":\"key\";k.innerText=keys[i]||\"\";k.onmousedown=function(){play(n[0],n[1])};p.appendChild(k)});function play(name,freq){if(!ctx)ctx=new(window.AudioContext||window.webkitAudioContext);var o=ctx.createOscillator(),g=ctx.createGain();o.connect(g);g.connect(ctx.destination);o.type=\"triangle\";o.frequency.value=freq;g.gain.setValueAtTime(0.3,ctx.currentTime);g.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+0.8);o.start();o.stop(ctx.currentTime+0.8);document.getElementById(\"note\").innerText=name+\" (\"+freq+\"Hz)\"}document.onkeydown=function(e){var i=keys.indexOf(e.key.toUpperCase());if(i>=0&&notes[i])play(notes[i][0],notes[i][1])}'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ“¡ Radar Sweep',d:'Rotating scanner with blips!',h:'Change sweep speed!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{margin:0;background:#000;display:flex;align-items:center;justify-content:center;height:100vh}\ncanvas{border-radius:50%;box-shadow:0 0 40px rgba(0,255,65,0.2)}\n#spd{position:fixed;bottom:15px;left:50%;transform:translateX(-50%);color:#0f0;font-size:13px;font-family:monospace}\n</style></head><body>\n<canvas id=\"cv\" width=\"400\" height=\"400\"></canvas>\n<div id=\"spd\">Speed: <input type=\"range\" id=\"sp\" min=\"1\" max=\"10\" value=\"3\" style=\"width:120px\"></div>\n<script>var cv=document.getElementById(\"cv\"),cx=cv.getContext(\"2d\"),angle=0,blips=[];for(var i=0;i<8;i++)blips.push({a:Math.random()*Math.PI*2,d:50+Math.random()*130,life:0});function draw(){var sp=+document.getElementById(\"sp\").value;angle+=0.02*sp;cx.fillStyle=\"rgba(0,0,0,0.06)\";cx.fillRect(0,0,400,400);cx.strokeStyle=\"#0a2a0a\";cx.lineWidth=1;for(var r=40;r<=180;r+=40){cx.beginPath();cx.arc(200,200,r,0,Math.PI*2);cx.stroke()}cx.beginPath();cx.moveTo(200,200);cx.lineTo(200+Math.cos(angle)*190,200+Math.sin(angle)*190);cx.strokeStyle=\"#00ff41\";cx.lineWidth=2;cx.stroke();cx.beginPath();cx.moveTo(200,200);cx.arc(200,200,190,angle-0.5,angle);cx.fillStyle=\"rgba(0,255,65,0.08)\";cx.fill();blips.forEach(function(b){var diff=angle-b.a;if(diff<0)diff+=Math.PI*2;if(diff<0.3&&diff>0)b.life=1;if(b.life>0){b.life-=0.008;var bx=200+Math.cos(b.a)*b.d,by=200+Math.sin(b.a)*b.d;cx.beginPath();cx.arc(bx,by,4,0,Math.PI*2);cx.fillStyle=\"rgba(0,255,65,\"+b.life+\")\";cx.fill()}});requestAnimationFrame(draw)}draw()'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ”¦ Flashlight',d:'Toggle & adjust brightness!',h:'Add a strobe mode!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#000;color:#fff;text-align:center;padding:30px;transition:all .3s;min-height:100vh}\n.torch{width:120px;height:120px;border-radius:50%;margin:20px auto;border:3px solid #333;display:flex;align-items:center;justify-content:center;font-size:50px;cursor:pointer;transition:all .3s}\n.torch.on{border-color:#fff;box-shadow:0 0 60px rgba(255,255,255,0.5)}\n.ctrls{margin:15px;opacity:0;transition:opacity .3s}\n.ctrls.vis{opacity:1}\nlabel{display:block;margin:8px;color:#888;font-size:14px}\ninput[type=range]{width:200px}\n#status{font-family:monospace;color:#555;margin:10px}\n</style></head><body>\n<h2>ğŸ”¦ Flashlight</h2>\n<div class=\"torch\" id=\"torch\" onclick=\"toggle()\">ğŸ”¦</div>\n<div class=\"ctrls\" id=\"ctrls\">\n<label>Brightness: <input type=\"range\" id=\"br\" min=\"10\" max=\"100\" value=\"100\" oninput=\"upd()\"><span id=\"bv\">100%</span></label>\n<label>Warmth: <input type=\"range\" id=\"wm\" min=\"3000\" max=\"7000\" value=\"5000\" oninput=\"upd()\"><span id=\"wv\">5000K</span></label>\n</div>\n<div id=\"status\">OFF</div>\n<script>var on=false;function toggle(){on=!on;document.getElementById(\"torch\").className=on?\"torch on\":\"torch\";document.getElementById(\"ctrls\").className=on?\"ctrls vis\":\"ctrls\";upd()}function upd(){if(!on){document.body.style.background=\"#000\";document.getElementById(\"status\").innerText=\"OFF\";return}var br=+document.getElementById(\"br\").value/100;var wm=+document.getElementById(\"wm\").value;document.getElementById(\"bv\").innerText=Math.round(br*100)+\"%\";document.getElementById(\"wv\").innerText=wm+\"K\";document.body.style.background=\"rgba(255,220,180,\"+br*0.3+\")\";document.getElementById(\"status\").innerText=\"ON | \"+Math.round(br*100)+\"% | \"+wm+\"K\"}'+sc+'\n</body></html>'},
{g:'ctrl',t:'ğŸ“‹ Drag & Drop',d:'Reorder by dragging!',h:'Add more items to the list!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#111;color:#fff;text-align:center;padding:20px}\n.list{max-width:300px;margin:15px auto}\n.item{display:flex;align-items:center;gap:10px;padding:12px;margin:4px 0;background:rgba(255,255,255,0.05);border:1px solid #333;border-radius:10px;cursor:grab;user-select:none}\n.item.dragging{opacity:0.4;border-color:#22c55e}\n.item.over{border-color:#3b82f6;background:rgba(59,130,246,0.1)}\n.grip{color:#555;font-size:18px}\n.num{background:#333;width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:bold;flex-shrink:0}\n#result{margin:15px;color:#888;font-size:13px;font-family:monospace}\n</style></head><body>\n<h2>ğŸ“‹ Drag to Reorder</h2>\n<div class=\"list\" id=\"list\"></div>\n<div id=\"result\"></div>\n<script>var items=[\"ğŸ® Gaming\",\"ğŸ“š Reading\",\"ğŸµ Music\",\"âš½ Sports\",\"ğŸ¨ Art\",\"ğŸ³ Cooking\"];var dragIdx=null;function render(){var list=document.getElementById(\"list\");list.innerHTML=\"\";items.forEach(function(it,i){var d=document.createElement(\"div\");d.className=\"item\";d.draggable=true;d.innerHTML=\'<span class=\"grip\">â ¿</span><span class=\"num\">\'+( i+1)+\'</span><span>\'+it+\"</span>\";d.ondragstart=function(){dragIdx=i;setTimeout(function(){d.classList.add(\"dragging\")},0)};d.ondragend=function(){dragIdx=null;render()};d.ondragover=function(e){e.preventDefault();d.classList.add(\"over\")};d.ondragleave=function(){d.classList.remove(\"over\")};d.ondrop=function(e){e.preventDefault();if(dragIdx!==null&&dragIdx!==i){var moved=items.splice(dragIdx,1)[0];items.splice(i,0,moved)}render()};list.appendChild(d)});document.getElementById(\"result\").innerText=items.map(function(s,i){return(i+1)+\". \"+s}).join(\" | \")}render()'+sc+'\n</body></html>'}
];

// --- SCIENCE LESSONS ---
const sciEN=[
{g:'beg',t:'âš¡ Ohm\'s Law Lab',d:'V = I Ã— R with animations!',h:'Change the resistance slider!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#0a0a2e;color:#fff;text-align:center;padding:20px}\n.row{display:flex;justify-content:center;gap:30px;margin:15px 0;flex-wrap:wrap}\n.gauge{background:rgba(255,255,255,0.05);border-radius:15px;padding:15px 20px;min-width:120px}\n.gauge .val{font-size:32px;font-weight:bold}\n.gauge .lbl{font-size:12px;color:#999;margin-top:4px}\ninput[type=range]{width:200px;margin:8px}\n.wire{height:4px;background:linear-gradient(90deg,#333,#0f0,#333);margin:10px auto;border-radius:2px;position:relative;overflow:hidden;width:250px}\n.electron{position:absolute;width:8px;height:8px;background:#0f0;border-radius:50%;top:-2px;box-shadow:0 0 8px #0f0}\n</style></head><body>\n<h2>âš¡ Ohm\'s Law Lab</h2>\n<p style="color:#888">V = I Ã— R</p>\n<div class="row">\n<div class="gauge"><div class="val" id="vV" style="color:#3b82f6">5.0V</div><div class="lbl">Voltage</div></div>\n<div class="gauge"><div class="val" id="vI" style="color:#22c55e">50mA</div><div class="lbl">Current</div></div>\n<div class="gauge"><div class="val" id="vR" style="color:#f97316">100Î©</div><div class="lbl">Resistance</div></div>\n</div>\n<label>ğŸ”‹ Voltage: <input type="range" id="sV" min="0" max="12" step="0.1" value="5" oninput="calc()"></label><br>\n<label>ğŸ”§ Resistance: <input type="range" id="sR" min="10" max="1000" value="100" oninput="calc()"></label>\n<div class="wire" id="wire"></div>\n<div id="led" style="font-size:50px;transition:all .3s">ğŸ’¡</div>\n<script>function calc(){var V=+document.getElementById("sV").value,R=+document.getElementById("sR").value,I=V/R;document.getElementById("vV").innerText=V.toFixed(1)+"V";document.getElementById("vR").innerText=R+"Î©";document.getElementById("vI").innerText=(I*1000).toFixed(1)+"mA";var led=document.getElementById("led");led.style.filter="brightness("+(0.3+I*8)+")";led.style.fontSize=(40+I*200)+"px";updateWire(I)}var els=[];function updateWire(I){var w=document.getElementById("wire");w.innerHTML="";var n=Math.max(1,Math.floor(I*80));for(var i=0;i<n;i++){var e=document.createElement("div");e.className="electron";e.style.left=Math.random()*250+"px";e.style.animation="moveE "+(0.5+1/(I*20+1))+"s linear infinite";w.appendChild(e)}}var st=document.createElement("style");st.textContent="@keyframes moveE{from{transform:translateX(-10px)}to{transform:translateX(260px)}}";document.head.appendChild(st);calc()'+sc+'\n</body></html>'},
{g:'beg',t:'ğŸ“» Morse Code',d:'Text â†’ dots & dashes â†’ beeps!',h:'Try typing your name!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#0a0a2e;color:#fff;text-align:center;padding:20px}\ninput{padding:12px;font-size:18px;border-radius:10px;border:2px solid #3b82f6;background:#111;color:#fff;width:250px;text-align:center}\n#out{font-size:24px;letter-spacing:4px;margin:15px;min-height:40px;color:#22c55e;font-family:monospace}\nbutton{padding:12px 24px;background:#22c55e;color:#fff;border:none;border-radius:10px;font-size:16px;cursor:pointer;margin:5px}\n</style></head><body>\n<h2>ğŸ“» Morse Code</h2>\n<input id="txt" placeholder="Type a word..." oninput="convert()">\n<div id="out"></div>\n<button onclick="play()">ğŸ”Š Play Sound</button>\n<button onclick="document.getElementById(\'txt\').value=\'\';convert()">Clear</button>\n<script>var M={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----.",0:"-----"};function convert(){var t=document.getElementById("txt").value.toUpperCase(),r="";for(var i=0;i<t.length;i++){var c=t[i];r+=c===" "?"  / ":M[c]?M[c]+" ":""}document.getElementById("out").innerText=r}function play(){var t=document.getElementById("txt").value.toUpperCase(),ctx=new(window.AudioContext||window.webkitAudioContext),time=ctx.currentTime;for(var i=0;i<t.length;i++){var c=t[i];if(c===" "){time+=0.3;continue}var m=M[c];if(!m)continue;for(var j=0;j<m.length;j++){var o=ctx.createOscillator(),g=ctx.createGain();o.connect(g);g.connect(ctx.destination);o.frequency.value=600;var dur=m[j]==="."?0.08:0.24;g.gain.setValueAtTime(0.3,time);o.start(time);o.stop(time+dur);time+=dur+0.06}time+=0.15}}'+sc+'\n</body></html>'},
{g:'beg',t:'ğŸ’¡ Logic Gates',d:'AND, OR, NOT â€” toggle & see!',h:'Try different input combinations!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#0a0a2e;color:#fff;text-align:center;padding:20px}\n.gate{display:inline-block;background:rgba(255,255,255,0.05);border-radius:15px;padding:15px;margin:10px;min-width:150px;border:1px solid #333}\n.gate h3{margin-bottom:10px}\n.toggle{width:50px;height:26px;border-radius:13px;background:#333;position:relative;display:inline-block;cursor:pointer;margin:4px;transition:background .3s}\n.toggle.on{background:#22c55e}\n.toggle::after{content:"";position:absolute;width:22px;height:22px;border-radius:50%;background:#fff;top:2px;left:2px;transition:left .3s}\n.toggle.on::after{left:26px}\n.out{font-size:36px;margin-top:10px}\n</style></head><body>\n<h2>ğŸ’¡ Logic Gates</h2>\n<div class="gate"><h3>AND</h3><div class="toggle" id="a1" onclick="tog(this)"></div><div class="toggle" id="a2" onclick="tog(this)"></div><div class="out" id="oAnd">ğŸ’¡</div></div>\n<div class="gate"><h3>OR</h3><div class="toggle" id="o1" onclick="tog(this)"></div><div class="toggle" id="o2" onclick="tog(this)"></div><div class="out" id="oOr">ğŸ’¡</div></div>\n<div class="gate"><h3>NOT</h3><div class="toggle" id="n1" onclick="tog(this)"></div><div class="out" id="oNot">ğŸ’¡</div></div>\n<div class="gate"><h3>XOR</h3><div class="toggle" id="x1" onclick="tog(this)"></div><div class="toggle" id="x2" onclick="tog(this)"></div><div class="out" id="oXor">ğŸ’¡</div></div>\n<script>function tog(el){el.classList.toggle("on");upd()}function gv(id){return document.getElementById(id).classList.contains("on")?1:0}function upd(){var a1=gv("a1"),a2=gv("a2"),o1=gv("o1"),o2=gv("o2"),n1=gv("n1"),x1=gv("x1"),x2=gv("x2");show("oAnd",a1&&a2);show("oOr",o1||o2);show("oNot",!n1);show("oXor",x1!==x2)}function show(id,v){var el=document.getElementById(id);el.innerText=v?"ğŸ’¡":"âš«";el.style.filter=v?"brightness(1.5) drop-shadow(0 0 10px gold)":"none"}upd()'+sc+'\n</body></html>'},
{g:'beg',t:'ğŸ“ Wave Playground',d:'See what radio signals look like!',h:'Try the square wave!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#0a0a2e;color:#fff;text-align:center;padding:15px}\ncanvas{display:block;margin:10px auto;border:1px solid #333;border-radius:10px}\nselect,input[type=range]{margin:5px;padding:6px;border-radius:8px;background:#222;color:#fff;border:1px solid #555}\nlabel{margin:0 8px;font-size:14px}\n</style></head><body>\n<h2>ğŸ“ Wave Lab</h2>\n<select id="wt" onchange="draw()"><option value="sin">Sine</option><option value="sq">Square</option><option value="saw">Sawtooth</option><option value="tri">Triangle</option></select><br>\n<label>Freq: <input type="range" id="fr" min="1" max="20" value="3" oninput="draw()"><span id="fv">3</span>Hz</label><br>\n<label>Amp: <input type="range" id="am" min="10" max="100" value="60" oninput="draw()"><span id="av">60</span>%</label>\n<canvas id="cv" width="500" height="200"></canvas>\n<script>var cv=document.getElementById("cv"),cx=cv.getContext("2d");function draw(){var f=+document.getElementById("fr").value,a=+document.getElementById("am").value/100,wt=document.getElementById("wt").value;document.getElementById("fv").innerText=f;document.getElementById("av").innerText=Math.round(a*100);cx.clearRect(0,0,500,200);cx.strokeStyle="#333";cx.beginPath();cx.moveTo(0,100);cx.lineTo(500,100);cx.stroke();cx.strokeStyle="#22c55e";cx.lineWidth=2;cx.beginPath();for(var x=0;x<500;x++){var t=x/500*f*2*Math.PI,y;if(wt==="sin")y=Math.sin(t);else if(wt==="sq")y=Math.sin(t)>0?1:-1;else if(wt==="saw")y=2*((t/(2*Math.PI))%1)-1;else y=2*Math.abs(2*((t/(2*Math.PI))%1)-1)-1;var py=100-y*80*a;x===0?cx.moveTo(x,py):cx.lineTo(x,py)}cx.stroke()}draw()'+sc+'\n</body></html>'},
{g:'exp',t:'ğŸ¤– Robot Commander',d:'Program a robot on a grid!',h:'Try LOOP 4 { FORWARD }',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:monospace;background:#0a0a2e;color:#0f0;padding:15px;text-align:center}\n#grid{display:inline-grid;grid-template-columns:repeat(8,40px);gap:2px;margin:10px}\n.cell{width:40px;height:40px;background:#111;border:1px solid #1a3a1a;display:flex;align-items:center;justify-content:center;font-size:20px}\n.cell.robot{background:#003300}\ntextarea{width:300px;height:80px;background:#111;color:#0f0;border:1px solid #333;border-radius:8px;padding:8px;font-family:monospace;font-size:14px}\nbutton{padding:10px 20px;background:#22c55e;color:#000;border:none;border-radius:8px;font-weight:bold;cursor:pointer;margin:5px;font-family:monospace}\n</style></head><body>\n<h2>ğŸ¤– Robot Commander</h2>\n<div id="grid"></div><br>\n<textarea id="prog" placeholder="FORWARD\\nLEFT\\nFORWARD\\nFORWARD">FORWARD\nFORWARD\nRIGHT\nFORWARD\nFORWARD\nLEFT\nFORWARD</textarea><br>\n<button onclick="run()">â–¶ RUN</button><button onclick="resetBot()">â†º RESET</button>\n<p id="status" style="margin:8px">Ready</p>\n<script>var rx=0,ry=0,dir=0,dirs=[[0,-1],[1,0],[0,1],[-1,0]],trail=[];function mkGrid(){var g=document.getElementById("grid");g.innerHTML="";for(var y=0;y<8;y++)for(var x=0;x<8;x++){var c=document.createElement("div");c.className="cell";c.id="c"+x+"_"+y;if(trail.indexOf(x+","+y)>=0)c.style.background="#002200";if(x===rx&&y===ry){c.classList.add("robot");c.innerText=["â¬†ï¸","â¡ï¸","â¬‡ï¸","â¬…ï¸"][dir]}g.appendChild(c)}}function resetBot(){rx=0;ry=0;dir=0;trail=[];mkGrid();document.getElementById("status").innerText="Ready"}function run(){var lines=document.getElementById("prog").value.toUpperCase().split("\\n"),i=0;trail=[[rx,ry].join(",")];function step(){if(i>=lines.length){document.getElementById("status").innerText="âœ… Done!";return}var cmd=lines[i].trim();if(cmd==="FORWARD"){rx+=dirs[dir][0];ry+=dirs[dir][1];rx=Math.max(0,Math.min(7,rx));ry=Math.max(0,Math.min(7,ry));trail.push(rx+","+ry)}else if(cmd==="RIGHT")dir=(dir+1)%4;else if(cmd==="LEFT")dir=(dir+3)%4;mkGrid();document.getElementById("status").innerText="â†’ "+cmd;i++;setTimeout(step,400)}step()}resetBot()'+sc+'\n</body></html>'},
{g:'exp',t:'ğŸ”­ Star Map',d:'Real stars in the night sky!',h:'Use the time slider to rotate!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{margin:0;background:#000;overflow:hidden;font-family:Arial}\ncanvas{display:block}\n#info{position:fixed;bottom:10px;left:10px;color:#aaa;font-size:12px}\n#tsl{position:fixed;bottom:10px;right:10px;width:200px}\n</style></head><body>\n<canvas id="cv"></canvas>\n<div id="info">Click a star for info</div>\n<input type="range" id="tsl" min="0" max="360" value="0" oninput="draw()">\n<script>var cv=document.getElementById("cv"),cx=cv.getContext("2d");cv.width=innerWidth;cv.height=innerHeight;var stars=[{n:"Sirius",ra:101,dec:-16,m:-1.46,c:"#a8c0ff"},{n:"Canopus",ra:96,dec:-52,m:-0.72,c:"#fffde0"},{n:"Arcturus",ra:214,dec:19,m:-0.04,c:"#ffcc88"},{n:"Vega",ra:279,dec:38,m:0.03,c:"#a8c0ff"},{n:"Capella",ra:79,dec:46,m:0.08,c:"#ffee88"},{n:"Rigel",ra:78,dec:-8,m:0.13,c:"#b0c4ff"},{n:"Betelgeuse",ra:88,dec:7,m:0.50,c:"#ffaa88"},{n:"Altair",ra:298,dec:9,m:0.77,c:"#fff"},{n:"Aldebaran",ra:69,dec:16,m:0.85,c:"#ffaa66"},{n:"Spica",ra:201,dec:-11,m:1.04,c:"#aac4ff"},{n:"Antares",ra:247,dec:-26,m:1.09,c:"#ff8866"},{n:"Pollux",ra:116,dec:28,m:1.14,c:"#ffcc88"},{n:"Fomalhaut",ra:344,dec:-29,m:1.16,c:"#c8d8ff"},{n:"Deneb",ra:310,dec:45,m:1.25,c:"#d0e0ff"},{n:"Regulus",ra:152,dec:12,m:1.35,c:"#bbccff"}];for(var i=0;i<120;i++)stars.push({n:"Star",ra:Math.random()*360,dec:Math.random()*140-70,m:2+Math.random()*3,c:"#fff"});function draw(){var rot=+document.getElementById("tsl").value;cx.clearRect(0,0,cv.width,cv.height);cx.fillStyle="#000";cx.fillRect(0,0,cv.width,cv.height);var W=cv.width,H=cv.height;stars.forEach(function(s){var x=((s.ra+rot)%360)/360*W;var y=(90-s.dec)/180*H;var r=Math.max(1,3-s.m*0.5);cx.beginPath();cx.arc(x,y,r,0,Math.PI*2);cx.fillStyle=s.c;cx.globalAlpha=Math.max(0.3,1-s.m/5);cx.fill();cx.globalAlpha=1;if(s.m<1.5){cx.beginPath();cx.arc(x,y,r+4,0,Math.PI*2);cx.fillStyle=s.c;cx.globalAlpha=0.1;cx.fill();cx.globalAlpha=1}})}draw();cv.onclick=function(e){var rot=+document.getElementById("tsl").value,best=null,bd=999;stars.forEach(function(s){var x=((s.ra+rot)%360)/360*cv.width,y=(90-s.dec)/180*cv.height,d=Math.sqrt((e.clientX-x)**2+(e.clientY-y)**2);if(d<bd){bd=d;best=s}});if(best&&bd<20)document.getElementById("info").innerText=best.n+" | Mag: "+best.m.toFixed(2);else document.getElementById("info").innerText="Click a star for info"};onresize=function(){cv.width=innerWidth;cv.height=innerHeight;draw()}'+sc+'\n</body></html>'},
{g:'exp',t:'ğŸ“¡ Signal Lab',d:'Mix waves & see interference!',h:'Try changing both frequencies!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#0a0a2e;color:#fff;text-align:center;padding:10px}\ncanvas{display:block;margin:5px auto;border:1px solid #222;border-radius:6px}\nlabel{font-size:13px;display:block;margin:3px}\ninput[type=range]{width:180px}\n</style></head><body>\n<h2>ğŸ“¡ Signal Lab</h2>\n<label>Wave A freq: <input type="range" id="f1" min="1" max="15" value="3" oninput="draw()"><span id="fv1">3</span>Hz</label>\n<label>Wave B freq: <input type="range" id="f2" min="1" max="15" value="5" oninput="draw()"><span id="fv2">5</span>Hz</label>\n<label>Mix: <select id="mix" onchange="draw()"><option value="add">Add (Interference)</option><option value="am">AM Modulation</option><option value="fm">FM (approx)</option></select></label>\n<canvas id="c1" width="500" height="80"></canvas>\n<canvas id="c2" width="500" height="80"></canvas>\n<canvas id="c3" width="500" height="100"></canvas>\n<script>function wave(cx,w,h,fn,color){cx.clearRect(0,0,w,h);cx.strokeStyle="#222";cx.beginPath();cx.moveTo(0,h/2);cx.lineTo(w,h/2);cx.stroke();cx.strokeStyle=color;cx.lineWidth=2;cx.beginPath();for(var x=0;x<w;x++){var y=h/2-fn(x/w)*h*0.4;x===0?cx.moveTo(x,y):cx.lineTo(x,y)}cx.stroke()}function draw(){var f1=+document.getElementById("f1").value,f2=+document.getElementById("f2").value,mix=document.getElementById("mix").value;document.getElementById("fv1").innerText=f1;document.getElementById("fv2").innerText=f2;var c1=document.getElementById("c1").getContext("2d"),c2=document.getElementById("c2").getContext("2d"),c3=document.getElementById("c3").getContext("2d");wave(c1,500,80,function(t){return Math.sin(t*f1*2*Math.PI)},"#3b82f6");wave(c2,500,80,function(t){return Math.sin(t*f2*2*Math.PI)},"#22c55e");var fn;if(mix==="add")fn=function(t){return Math.sin(t*f1*2*Math.PI)+Math.sin(t*f2*2*Math.PI)};else if(mix==="am")fn=function(t){return Math.sin(t*f1*2*Math.PI)*(1+0.8*Math.sin(t*f2*2*Math.PI))};else fn=function(t){return Math.sin(t*f1*2*Math.PI+3*Math.sin(t*f2*2*Math.PI))};wave(c3,500,100,fn,"#f97316")}draw()'+sc+'\n</body></html>'},
{g:'exp',t:'âš›ï¸ Periodic Table',d:'All 118 elements interactive!',h:'Click an element for details!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#0a0a2e;color:#fff;padding:8px;font-size:11px}\n#grid{display:grid;grid-template-columns:repeat(18,1fr);gap:2px;max-width:900px;margin:0 auto}\n.el{padding:3px;text-align:center;border-radius:4px;cursor:pointer;border:1px solid transparent;transition:all .2s;min-height:36px;display:flex;flex-direction:column;justify-content:center}\n.el:hover{transform:scale(1.3);z-index:10;border-color:#fff}\n.el .num{font-size:8px;color:rgba(255,255,255,0.6)}\n.el .sym{font-weight:bold;font-size:13px}\n.empty{visibility:hidden}\n#info{text-align:center;padding:10px;margin:8px auto;background:rgba(255,255,255,0.05);border-radius:10px;max-width:400px;min-height:50px}\nh2{text-align:center;margin:4px}\n</style></head><body>\n<h2>âš›ï¸ Periodic Table</h2>\n<div id="info">Click an element!</div>\n<div id="grid"></div>\n<script>var E=[["H",1,1,1,"#ef4444","Hydrogen","1.008","1s1"],["He",2,1,18,"#a855f7","Helium","4.003","1s2"],["Li",3,2,1,"#f59e0b","Lithium","6.941","[He]2s1"],["Be",4,2,2,"#eab308","Beryllium","9.012","[He]2s2"],["B",5,2,13,"#84cc16","Boron","10.81","[He]2s2 2p1"],["C",6,2,14,"#ef4444","Carbon","12.01","[He]2s2 2p2"],["N",7,2,15,"#ef4444","Nitrogen","14.01","[He]2s2 2p3"],["O",8,2,16,"#ef4444","Oxygen","16.00","[He]2s2 2p4"],["F",9,2,17,"#22c55e","Fluorine","19.00","[He]2s2 2p5"],["Ne",10,2,18,"#a855f7","Neon","20.18","[He]2s2 2p6"],["Na",11,3,1,"#f59e0b","Sodium","22.99","[Ne]3s1"],["Mg",12,3,2,"#eab308","Magnesium","24.31","[Ne]3s2"],["Al",13,3,13,"#3b82f6","Aluminium","26.98","[Ne]3s2 3p1"],["Si",14,3,14,"#84cc16","Silicon","28.09",""],["P",15,3,15,"#ef4444","Phosphorus","30.97",""],["S",16,3,16,"#ef4444","Sulfur","32.07",""],["Cl",17,3,17,"#22c55e","Chlorine","35.45",""],["Ar",18,3,18,"#a855f7","Argon","39.95",""],["K",19,4,1,"#f59e0b","Potassium","39.10",""],["Ca",20,4,2,"#eab308","Calcium","40.08",""],["Fe",26,4,8,"#06b6d4","Iron","55.85",""],["Cu",29,4,11,"#06b6d4","Copper","63.55",""],["Zn",30,4,12,"#06b6d4","Zinc","65.38",""],["Au",79,6,11,"#06b6d4","Gold","196.97",""],["Ag",47,5,11,"#06b6d4","Silver","107.87",""],["U",92,7,6,"#ec4899","Uranium","238.03",""]];var grid=document.getElementById("grid");for(var row=1;row<=7;row++)for(var col=1;col<=18;col++){var found=E.find(function(e){return e[2]===row&&e[3]===col});var d=document.createElement("div");d.className="el";if(found){d.style.background=found[4]+"33";d.style.borderColor=found[4]+"66";d.innerHTML="<div class=\\"num\\">"+found[1]+"</div><div class=\\"sym\\">"+found[0]+"</div>";d.onclick=(function(e){return function(){document.getElementById("info").innerHTML="<b style=\\"font-size:24px\\">"+e[0]+"</b> "+e[5]+"<br>Atomic #"+e[1]+" | Mass: "+e[6]+(e[7]?"<br><small>"+e[7]+"</small>":"")}})(found)}else{d.className="el empty";d.innerHTML="&nbsp;"}grid.appendChild(d)}'+sc+'\n</body></html>'},
{g:'adv',t:'ğŸ“Š Spectrum Analyzer',d:'See sound frequencies live!',h:'Try whistling or clapping!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{margin:0;background:#000;overflow:hidden;font-family:monospace}\ncanvas{display:block}\n#status{position:fixed;top:10px;left:50%;transform:translateX(-50%);color:#0f0;font-size:14px}\nbutton{position:fixed;top:40px;left:50%;transform:translateX(-50%);padding:12px 24px;background:#22c55e;color:#000;border:none;border-radius:10px;font-weight:bold;cursor:pointer;font-size:16px}\n</style></head><body>\n<canvas id="cv"></canvas>\n<div id="status">Click START to begin</div>\n<button onclick="startMic()" id="btn">ğŸ¤ START</button>\n<script>var cv=document.getElementById("cv"),cx=cv.getContext("2d"),ctx,analyser,data;cv.width=innerWidth;cv.height=innerHeight;function startMic(){navigator.mediaDevices.getUserMedia({audio:true}).then(function(stream){ctx=new AudioContext();var src=ctx.createMediaStreamSource(stream);analyser=ctx.createAnalyser();analyser.fftSize=2048;src.connect(analyser);data=new Uint8Array(analyser.frequencyBinCount);document.getElementById("btn").style.display="none";document.getElementById("status").innerText="ğŸ¤ Listening...";draw()}).catch(function(){document.getElementById("status").innerText="Mic access denied"})}function draw(){if(!analyser)return;requestAnimationFrame(draw);analyser.getByteFrequencyData(data);var W=cv.width,H=cv.height,n=data.length,bw=W/n*2;cx.fillStyle="rgba(0,0,0,0.15)";cx.fillRect(0,0,W,H);for(var i=0;i<n/2;i++){var v=data[i]/255;var h=v*H*0.9;var hue=i/n*720;cx.fillStyle="hsl("+hue+",100%,"+(30+v*40)+"%)";cx.fillRect(i*bw,H-h,bw-1,h);cx.fillStyle="hsl("+hue+",100%,"+(20+v*20)+"%)";cx.fillRect(i*bw,0,bw-1,v*3)}}onresize=function(){cv.width=innerWidth;cv.height=innerHeight}'+sc+'\n</body></html>'},
{g:'adv',t:'ğŸ“ Fourier Visualizer',d:'Any wave = sum of sines!',h:'Move the harmonic sliders!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#0a0a2e;color:#fff;text-align:center;padding:10px}\ncanvas{display:block;margin:8px auto;border:1px solid #222;border-radius:8px}\n.harmonics{display:flex;justify-content:center;gap:8px;flex-wrap:wrap;margin:10px}\n.harm{display:flex;flex-direction:column;align-items:center;font-size:11px}\ninput[type=range]{writing-mode:vertical-lr;height:80px;width:20px}\n</style></head><body>\n<h2>ğŸ“ Fourier Visualizer</h2>\n<p style="color:#888;font-size:13px">Every wave = sum of sine waves!</p>\n<canvas id="cv" width="500" height="200"></canvas>\n<div class="harmonics" id="hm"></div>\n<script>var N=8,amps=[];var hm=document.getElementById("hm");for(var i=0;i<N;i++){amps[i]=i===0?1:0;var d=document.createElement("div");d.className="harm";var s=document.createElement("input");s.type="range";s.min="-100";s.max="100";s.value=i===0?"100":"0";s.setAttribute("data-i",i);s.oninput=function(){amps[+this.getAttribute("data-i")]=+this.value/100;draw()};var l=document.createElement("div");l.innerText=(i+1)+"x";d.appendChild(s);d.appendChild(l);hm.appendChild(d)}var cv=document.getElementById("cv"),cx=cv.getContext("2d");function draw(){cx.clearRect(0,0,500,200);cx.strokeStyle="#222";cx.beginPath();cx.moveTo(0,100);cx.lineTo(500,100);cx.stroke();for(var h=0;h<N;h++){if(Math.abs(amps[h])<0.01)continue;cx.strokeStyle="hsla("+(h*45)+",80%,60%,0.3)";cx.lineWidth=1;cx.beginPath();for(var x=0;x<500;x++){var t=x/500*2*Math.PI;var y=100-amps[h]*Math.sin(t*(h+1))*70;x===0?cx.moveTo(x,y):cx.lineTo(x,y)}cx.stroke()}cx.strokeStyle="#22c55e";cx.lineWidth=2.5;cx.beginPath();for(var x=0;x<500;x++){var t=x/500*2*Math.PI,y=0;for(var h=0;h<N;h++)y+=amps[h]*Math.sin(t*(h+1));var py=100-y*70/N*2;x===0?cx.moveTo(x,py):cx.lineTo(x,py)}cx.stroke()}draw()'+sc+'\n</body></html>'},
{g:'adv',t:'ğŸ›°ï¸ Satellite Tracker',d:'Watch the ISS orbit Earth!',h:'Adjust the speed slider!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{margin:0;background:#000;overflow:hidden;font-family:Arial}\ncanvas{display:block}\n#hud{position:fixed;top:10px;left:10px;color:#0f0;font-size:13px;font-family:monospace;background:rgba(0,0,0,0.7);padding:10px;border-radius:8px;border:1px solid #1a3a1a}\n#spd{position:fixed;bottom:15px;left:50%;transform:translateX(-50%);display:flex;align-items:center;gap:10px;color:#888;font-size:13px}\ninput[type=range]{width:150px}\n</style></head><body>\n<canvas id="cv"></canvas>\n<div id="hud">ğŸ›°ï¸ ISS Tracker<br><span id="pos">Lat:0 Lon:0</span><br><span id="alt">Alt: 408 km</span></div>\n<div id="spd">Speed: <input type="range" id="sp" min="1" max="20" value="5"> <span id="sv">5x</span></div>\n<script>var cv=document.getElementById("cv"),cx=cv.getContext("2d"),t=0;cv.width=innerWidth;cv.height=innerHeight;function draw(){var W=cv.width,H=cv.height,sp=+document.getElementById("sp").value;document.getElementById("sv").innerText=sp+"x";t+=0.002*sp;cx.fillStyle="rgba(0,0,0,0.08)";cx.fillRect(0,0,W,H);cx.fillStyle="#0a1628";cx.fillRect(0,0,W,H);cx.strokeStyle="#1a3a2a";cx.lineWidth=0.5;for(var i=0;i<12;i++){cx.beginPath();cx.moveTo(i*W/12,0);cx.lineTo(i*W/12,H);cx.stroke()}for(var i=0;i<6;i++){cx.beginPath();cx.moveTo(0,i*H/6);cx.lineTo(W,i*H/6);cx.stroke()}cx.fillStyle="#0a3a2a";cx.beginPath();for(var x=0;x<W;x++){var lon=(x/W)*360-180;var lat=20*Math.sin(lon*Math.PI/60);var y=H/2-lat/90*H/2+Math.sin(lon*0.02)*20;x===0?cx.moveTo(x,y):cx.lineTo(x,y)}cx.lineTo(W,H);cx.lineTo(0,H);cx.fill();var orbitPeriod=2*Math.PI;var issLon=((t*50)%360);var issLat=51.6*Math.sin(t*2);var ix=((issLon+180)/360)*W;var iy=H/2-issLat/90*H/2;cx.strokeStyle="rgba(255,100,0,0.3)";cx.lineWidth=1;cx.beginPath();for(var p=-200;p<200;p++){var pLon=issLon+p;var pLat=51.6*Math.sin(t*2+p*0.02);var px=((pLon+180)%360)/360*W;var py=H/2-pLat/90*H/2;p===-200?cx.moveTo(px,py):cx.lineTo(px,py)}cx.stroke();cx.beginPath();cx.arc(ix,iy,5,0,Math.PI*2);cx.fillStyle="#ff4444";cx.fill();cx.beginPath();cx.arc(ix,iy,12,0,Math.PI*2);cx.strokeStyle="rgba(255,68,68,0.4)";cx.lineWidth=2;cx.stroke();cx.fillStyle="#fff";cx.font="11px monospace";cx.fillText("ISS ğŸ›°ï¸",ix+15,iy+4);document.getElementById("pos").innerText="Lat:"+issLat.toFixed(1)+"Â° Lon:"+(issLon-180).toFixed(1)+"Â°";var termX=(((Date.now()/100)%360+180)/360)*W;cx.fillStyle="rgba(0,0,30,0.3)";cx.fillRect(termX,0,W/2,H);requestAnimationFrame(draw)}draw();onresize=function(){cv.width=innerWidth;cv.height=innerHeight}'+sc+'\n</body></html>'},
{g:'adv',t:'ğŸ’¡ Circuit Builder',d:'Wire up LEDs & resistors!',h:'Click components, then click cells!',
c:'<!DOCTYPE html>\n<html><head><style>\nbody{font-family:Arial;background:#0a0a2e;color:#fff;text-align:center;padding:10px}\n#board{display:inline-grid;grid-template-columns:repeat(6,64px);gap:4px;margin:10px}\n.cell{width:64px;height:64px;background:rgba(255,255,255,0.03);border:1px solid #222;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:28px;cursor:pointer;transition:all .2s}\n.cell:hover{background:rgba(255,255,255,0.08);border-color:#555}\n.toolbar{display:flex;justify-content:center;gap:8px;margin:10px;flex-wrap:wrap}\n.tool{padding:8px 14px;background:rgba(255,255,255,0.05);border:1px solid #333;border-radius:8px;cursor:pointer;font-size:16px;transition:all .2s}\n.tool.active{border-color:#22c55e;background:rgba(34,197,94,0.15)}\n#msg{margin:10px;padding:8px;border-radius:8px;font-size:14px}\n</style></head><body>\n<h2>ğŸ’¡ Circuit Builder</h2>\n<div class="toolbar">\n<div class="tool active" onclick="pick(this,\'ğŸ”‹\')">ğŸ”‹ Battery</div>\n<div class="tool" onclick="pick(this,\'ğŸ’¡\')">ğŸ’¡ LED</div>\n<div class="tool" onclick="pick(this,\'âš¡\')">âš¡ Resistor</div>\n<div class="tool" onclick="pick(this,\'ğŸ”Œ\')">ğŸ”Œ Wire</div>\n<div class="tool" onclick="pick(this,\'âŒ\')">âŒ Erase</div>\n</div>\n<div id="board"></div>\n<button onclick="simulate()" style="padding:10px 24px;background:#22c55e;color:#000;border:none;border-radius:10px;font-weight:bold;cursor:pointer;margin:5px;font-size:16px">âš¡ Simulate</button>\n<button onclick="clearBoard()" style="padding:10px 24px;background:#ef4444;color:#fff;border:none;border-radius:10px;cursor:pointer;margin:5px">Clear</button>\n<div id="msg" style="color:#888">Place components, then Simulate!</div>\n<script>var grid=Array(36).fill(""),cur="ğŸ”‹",board=document.getElementById("board");function mkBoard(){board.innerHTML="";for(var i=0;i<36;i++){var c=document.createElement("div");c.className="cell";c.innerText=grid[i];c.onclick=(function(idx){return function(){grid[idx]=cur==="âŒ"?"":cur;mkBoard()}})(i);board.appendChild(c)}}function pick(el,t){cur=t;document.querySelectorAll(".tool").forEach(function(e){e.classList.remove("active")});el.classList.add("active")}function clearBoard(){grid=Array(36).fill("");mkBoard();document.getElementById("msg").innerText="Cleared!";document.getElementById("msg").style.color="#888"}function simulate(){var hasBat=grid.indexOf("ğŸ”‹")>=0,hasLed=grid.indexOf("ğŸ’¡")>=0,hasWire=grid.indexOf("ğŸ”Œ")>=0,hasRes=grid.indexOf("âš¡")>=0;var msg=document.getElementById("msg");if(!hasBat){msg.innerText="âš ï¸ No battery! Add ğŸ”‹";msg.style.color="#f97316";return}if(!hasLed){msg.innerText="âš ï¸ No LED! Add ğŸ’¡";msg.style.color="#f97316";return}if(hasBat&&hasLed&&!hasRes){msg.innerText="âš ï¸ No resistor! LED might burn!";msg.style.color="#ef4444"}else if(hasBat&&hasLed&&hasRes){msg.innerText="âœ… Circuit works! LED is ON! ğŸ’¡âœ¨";msg.style.color="#22c55e"}else{msg.innerText="Connect battery â†’ resistor â†’ LED";msg.style.color="#3b82f6"}var cells=board.children;for(var i=0;i<36;i++){if(grid[i]==="ğŸ’¡"&&hasBat){cells[i].style.textShadow="0 0 20px gold";cells[i].style.filter="brightness(1.5)"}}}mkBoard()'+sc+'\n</body></html>'}
];

// FRENCH
const basicsFR=basicsEN.map(function(l){
var m={
'ğŸ  My First Page':'ğŸ  Ma PremiÃ¨re Page','Start with HTML tags!':'Commence avec les balises HTML!','Change the text!':'Change le texte!',
'ğŸ“ Cool Lists':'ğŸ“ Listes Cool','Make lists of favorites!':'Fais des listes de tes favoris!','Add more <li> items!':'Ajoute des <li>!',
'ğŸ–¼ï¸ Images & Links':'ğŸ–¼ï¸ Images & Liens','Add pictures and links!':'Ajoute des images et liens!','Change the URL!':'Change l\'URL!',
'ğŸ¨ Paint Your Page':'ğŸ¨ Peins Ta Page','Add awesome colors!':'Ajoute des couleurs!','Try crimson, gold, dodgerblue!':'Essaie crimson, gold, dodgerblue!',
'ğŸ“¦ Game Cards':'ğŸ“¦ Cartes de Jeu','RPG cards with effects!':'Cartes RPG avec effets!','Change border-radius to 50%!':'Change border-radius Ã  50%!',
'ğŸŒ€ Animations':'ğŸŒ€ Animations','Make things spin & bounce!':'Fais tourner et rebondir!','Change animation duration!':'Change la durÃ©e!',
'âš¡ Click Power!':'âš¡ Clique Power!','Buttons that DO things!':'Des boutons qui font des trucs!','Change the alert messages!':'Change les messages!',
'ğŸ§® Calculator':'ğŸ§® Calculatrice','Build a calculator!':'Construis une calculatrice!','Add a divide button!':'Ajoute un bouton diviser!',
'ğŸ® Monster Clicker':'ğŸ® Clicker Monstre','Your own clicker game!':'Ton propre jeu clicker!','Add new upgrades!':'Ajoute des amÃ©liorations!',
'ğŸšï¸ Slider Control':'ğŸšï¸ Curseurs','Sliders change things live!':'Les curseurs changent en direct!','Add more sliders for width/height!':'Ajoute des curseurs!',
'ğŸ•¹ï¸ Joystick':'ğŸ•¹ï¸ Joystick','Drag to move things!':'Glisse pour dÃ©placer!','Change the speed or arena size!':'Change la vitesse!',
'ğŸ“Š Bar Chart':'ğŸ“Š Graphique','Data becomes visual!':'Les donnÃ©es deviennent visuelles!','Change the numbers in the array!':'Change les nombres!',
'ğŸ”˜ Gauge Meter':'ğŸ”˜ Jauge','A speedometer gauge!':'Un compteur de vitesse!','Change max value or colors!':'Change les couleurs!',
'ğŸ”˜ Toggle Switch':'ğŸ”˜ Interrupteur',
'On/Off like a light switch!':'Marche/ArrÃªt!',
'Add more toggles for different lights!':'Ajoute des interrupteurs!',
'ğŸ”² Checkbox Group':'ğŸ”² Cases Ã  Cocher',
'Multi-select your pizza!':'Choisis tes garnitures!',
'Add more toppings!':'Ajoute des garnitures!',
'ğŸ”´ Radio Buttons':'ğŸ”´ Boutons Radio',
'Pick one â€” page changes!':'Choisis â€” la page change!',
'Add more color options!':'Ajoute des couleurs!',
'ğŸ“ Tooltip Slider':'ğŸ“ Curseur Bulle',
'A bubble follows the thumb!':'Une bulle suit le curseur!',
'Change min/max values!':'Change les valeurs!',
'ğŸ”¢ Stepper Counter':'ğŸ”¢ Compteur',
'Plus/Minus with limits!':'Plus/Moins avec limites!',
'Change the min/max limits!':'Change les limites!',
'â­ Star Rating':'â­ Notation Ã‰toiles',
'Click to rate 1-5!':'Clique pour noter!',
'Change from stars to hearts!':'Change en cÅ“urs!',
'ğŸ¨ Color Picker':'ğŸ¨ SÃ©lecteur Couleur',
'Mix RGB colors!':'MÃ©lange RVB!',
'Try making pure white or black!':'Fais du blanc pur!',
'â±ï¸ Stopwatch':'â±ï¸ ChronomÃ¨tre',
'Precision timing!':'ChronomÃ©trage prÃ©cis!',
'Add a countdown mode!':'Ajoute un dÃ©compte!',
'ğŸŒ¡ï¸ Thermometer':'ğŸŒ¡ï¸ ThermomÃ¨tre',
'Temperature gauge!':'Jauge tempÃ©rature!',
'Change the color thresholds!':'Change les seuils!',
'ğŸ”„ Progress Ring':'ğŸ”„ Anneau ProgrÃ¨s',
'Animated circle progress!':'ProgrÃ¨s animÃ©!',
'Change the ring color!':'Change la couleur!',
'ğŸ¹ Piano Keys':'ğŸ¹ Piano',
'Play notes with clicks!':'Joue des notes!',
'Add more octaves!':'Ajoute des octaves!',
'ğŸ“¡ Radar Sweep':'ğŸ“¡ Radar',
'Rotating scanner with blips!':'Scanner rotatif!',
'Change sweep speed!':'Change la vitesse!',
'ğŸ”¦ Flashlight':'ğŸ”¦ Lampe Torche',
'Toggle & adjust brightness!':'Active et ajuste!',
'Add a strobe mode!':'Ajoute stroboscope!',
'ğŸ“‹ Drag & Drop':'ğŸ“‹ Glisser-DÃ©poser',
'Reorder by dragging!':'RÃ©ordonne en glissant!',
'Add more items to the list!':'Ajoute des Ã©lÃ©ments!'
};
return{g:l.g,t:m[l.t]||l.t,d:m[l.d]||l.d,h:m[l.h]||l.h,c:l.c}});

const sciFR=sciEN.map(function(l){
var m={
'âš¡ Ohm\'s Law Lab':'âš¡ Labo Loi d\'Ohm','V = I Ã— R with animations!':'V = I Ã— R avec animations!','Change the resistance slider!':'Change la rÃ©sistance!',
'ğŸ“» Morse Code':'ğŸ“» Code Morse','Text â†’ dots & dashes â†’ beeps!':'Texte â†’ points et traits â†’ bips!','Try typing your name!':'Tape ton nom!',
'ğŸ’¡ Logic Gates':'ğŸ’¡ Portes Logiques','AND, OR, NOT â€” toggle & see!':'ET, OU, NON â€” bascule et vois!','Try different input combinations!':'Essaie les combinaisons!',
'ğŸ“ Wave Playground':'ğŸ“ Labo Ondes','See what radio signals look like!':'Vois les signaux radio!','Try the square wave!':'Essaie l\'onde carrÃ©e!',
'ğŸ¤– Robot Commander':'ğŸ¤– Commandant Robot','Program a robot on a grid!':'Programme un robot!','Try LOOP 4 { FORWARD }':'Essaie LOOP 4!',
'ğŸ”­ Star Map':'ğŸ”­ Carte des Ã‰toiles','Real stars in the night sky!':'Vraies Ã©toiles!','Use the time slider to rotate!':'Utilise le curseur!',
'ğŸ“¡ Signal Lab':'ğŸ“¡ Labo Signaux','Mix waves & see interference!':'MÃ©lange les ondes!','Try changing both frequencies!':'Change les frÃ©quences!',
'âš›ï¸ Periodic Table':'âš›ï¸ Tableau PÃ©riodique','All 118 elements interactive!':'Tous les Ã©lÃ©ments!','Click an element for details!':'Clique un Ã©lÃ©ment!',
'ğŸ“Š Spectrum Analyzer':'ğŸ“Š Analyseur Spectre','See sound frequencies live!':'FrÃ©quences sonores en direct!','Try whistling or clapping!':'Siffle ou tape des mains!',
'ğŸ“ Fourier Visualizer':'ğŸ“ Visualiseur Fourier','Any wave = sum of sines!':'Onde = somme de sinus!','Move the harmonic sliders!':'Bouge les curseurs!',
'ğŸ›°ï¸ Satellite Tracker':'ğŸ›°ï¸ Traqueur Satellite','Watch the ISS orbit Earth!':'L\'ISS en orbite!','Adjust the speed slider!':'Ajuste la vitesse!',
'ğŸ’¡ Circuit Builder':'ğŸ’¡ Constructeur Circuit','Wire up LEDs & resistors!':'CÃ¢ble LEDs et rÃ©sistances!','Click components, then click cells!':'Clique les composants!'
};
return{g:l.g,t:m[l.t]||l.t,d:m[l.d]||l.d,h:m[l.h]||l.h,c:l.c}});

const basicsAR=basicsEN.map(function(l){
var m={
'ğŸ  My First Page':'ğŸ  ØµÙØ­ØªÙŠ Ø§Ù„Ø£ÙˆÙ„Ù‰','Start with HTML tags!':'!Ø§Ø¨Ø¯Ø£ Ø¨ÙˆØ³ÙˆÙ… HTML','Change the text!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ù†Øµ',
'ğŸ“ Cool Lists':'ğŸ“ Ù‚ÙˆØ§Ø¦Ù… Ø±Ø§Ø¦Ø¹Ø©','Make lists of favorites!':'!Ø§ØµÙ†Ø¹ Ù‚ÙˆØ§Ø¦Ù…','Add more <li> items!':'!Ø£Ø¶Ù Ø¹Ù†Ø§ØµØ±',
'ğŸ–¼ï¸ Images & Links':'ğŸ–¼ï¸ ØµÙˆØ± ÙˆØ±ÙˆØ§Ø¨Ø·','Add pictures and links!':'!Ø£Ø¶Ù ØµÙˆØ± ÙˆØ±ÙˆØ§Ø¨Ø·','Change the URL!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø±Ø§Ø¨Ø·',
'ğŸ¨ Paint Your Page':'ğŸ¨ Ù„ÙˆÙ‘Ù† ØµÙØ­ØªÙƒ','Add awesome colors!':'!Ø£Ø¶Ù Ø£Ù„ÙˆØ§Ù†','Try crimson, gold, dodgerblue!':'!Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø£Ù„ÙˆØ§Ù†',
'ğŸ“¦ Game Cards':'ğŸ“¦ Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ø¹Ø¨','RPG cards with effects!':'!Ø¨Ø·Ø§Ù‚Ø§Øª Ø¨ØªØ£Ø«ÙŠØ±Ø§Øª','Change border-radius to 50%!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø²ÙˆØ§ÙŠØ§',
'ğŸŒ€ Animations':'ğŸŒ€ Ø­Ø±ÙƒØ§Øª','Make things spin & bounce!':'!Ø§Ø¬Ø¹Ù„Ù‡Ø§ ØªØ¯ÙˆØ±','Change animation duration!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø³Ø±Ø¹Ø©',
'âš¡ Click Power!':'âš¡ Ù‚ÙˆØ© Ø§Ù„Ù†Ù‚Ø±','Buttons that DO things!':'!Ø£Ø²Ø±Ø§Ø± ØªÙØ¹Ù„ Ø£Ø´ÙŠØ§Ø¡','Change the alert messages!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø±Ø³Ø§Ø¦Ù„',
'ğŸ§® Calculator':'ğŸ§® Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø©','Build a calculator!':'!Ø§Ø¨Ù†Ù Ø¢Ù„Ø© Ø­Ø§Ø³Ø¨Ø©','Add a divide button!':'!Ø£Ø¶Ù Ø²Ø± Ø§Ù„Ù‚Ø³Ù…Ø©',
'ğŸ® Monster Clicker':'ğŸ® Ù†Ø§Ù‚Ø± Ø§Ù„ÙˆØ­ÙˆØ´','Your own clicker game!':'!Ù„Ø¹Ø¨ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©','Add new upgrades!':'!Ø£Ø¶Ù ØªØ±Ù‚ÙŠØ§Øª',
'ğŸšï¸ Slider Control':'ğŸšï¸ ØªØ­ÙƒÙ… Ù…Ù†Ø²Ù„Ù‚','Sliders change things live!':'!Ø§Ù„Ù…Ù†Ø²Ù„Ù‚Ø§Øª ØªØºÙŠÙ‘Ø± Ù…Ø¨Ø§Ø´Ø±Ø©','Add more sliders for width/height!':'!Ø£Ø¶Ù Ù…Ù†Ø²Ù„Ù‚Ø§Øª',
'ğŸ•¹ï¸ Joystick':'ğŸ•¹ï¸ Ø¹ØµØ§ ØªØ­ÙƒÙ…','Drag to move things!':'!Ø§Ø³Ø­Ø¨ Ù„Ù„ØªØ­Ø±ÙŠÙƒ','Change the speed or arena size!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø³Ø±Ø¹Ø©',
'ğŸ“Š Bar Chart':'ğŸ“Š Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ','Data becomes visual!':'!Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØµØ¨Ø­ Ù…Ø±Ø¦ÙŠØ©','Change the numbers in the array!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø£Ø±Ù‚Ø§Ù…',
'ğŸ”˜ Gauge Meter':'ğŸ”˜ Ù…Ù‚ÙŠØ§Ø³','A speedometer gauge!':'!Ø¹Ø¯Ø§Ø¯ Ø³Ø±Ø¹Ø©','Change max value or colors!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù†',
'ğŸ”˜ Toggle Switch':'ğŸ”˜ Ù…ÙØªØ§Ø­ ØªØ¨Ø¯ÙŠÙ„',
'On/Off like a light switch!':'!ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù',
'Add more toggles for different lights!':'!Ø£Ø¶Ù Ù…ÙØ§ØªÙŠØ­',
'ğŸ”² Checkbox Group':'ğŸ”² Ù…Ø±Ø¨Ø¹Ø§Øª Ø§Ø®ØªÙŠØ§Ø±',
'Multi-select your pizza!':'!Ø§Ø®ØªØ± Ø¥Ø¶Ø§ÙØ§Øª',
'Add more toppings!':'!Ø£Ø¶Ù Ø¥Ø¶Ø§ÙØ§Øª',
'ğŸ”´ Radio Buttons':'ğŸ”´ Ø£Ø²Ø±Ø§Ø± Ø±Ø§Ø¯ÙŠÙˆ',
'Pick one â€” page changes!':'!Ø§Ø®ØªØ± ÙˆØ§Ø­Ø¯Ø§Ù‹',
'Add more color options!':'!Ø£Ø¶Ù Ø£Ù„ÙˆØ§Ù†',
'ğŸ“ Tooltip Slider':'ğŸ“ Ù…Ù†Ø²Ù„Ù‚ Ø¨ÙÙ‚Ø§Ø¹Ø©',
'A bubble follows the thumb!':'!ÙÙ‚Ø§Ø¹Ø© ØªØªØ¨Ø¹',
'Change min/max values!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ù‚ÙŠÙ…',
'ğŸ”¢ Stepper Counter':'ğŸ”¢ Ø¹Ø¯Ø§Ø¯',
'Plus/Minus with limits!':'!Ø²Ø§Ø¦Ø¯/Ù†Ø§Ù‚Øµ',
'Change the min/max limits!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø­Ø¯ÙˆØ¯',
'â­ Star Rating':'â­ ØªÙ‚ÙŠÙŠÙ… Ù†Ø¬ÙˆÙ…',
'Click to rate 1-5!':'!Ø§Ù†Ù‚Ø± Ù„Ù„ØªÙ‚ÙŠÙŠÙ…',
'Change from stars to hearts!':'!ØºÙŠÙ‘Ø± Ù„Ù‚Ù„ÙˆØ¨',
'ğŸ¨ Color Picker':'ğŸ¨ Ù…Ù†ØªÙ‚ÙŠ Ø£Ù„ÙˆØ§Ù†',
'Mix RGB colors!':'!Ø§Ù…Ø²Ø¬ Ø§Ù„Ø£Ù„ÙˆØ§Ù†',
'Try making pure white or black!':'!Ø¬Ø±Ù‘Ø¨ Ø£Ø¨ÙŠØ¶ Ø£Ùˆ Ø£Ø³ÙˆØ¯',
'â±ï¸ Stopwatch':'â±ï¸ Ø³Ø§Ø¹Ø© Ø¥ÙŠÙ‚Ø§Ù',
'Precision timing!':'!ØªÙˆÙ‚ÙŠØª Ø¯Ù‚ÙŠÙ‚',
'Add a countdown mode!':'!Ø£Ø¶Ù Ø¹Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ',
'ğŸŒ¡ï¸ Thermometer':'ğŸŒ¡ï¸ Ù…ÙŠØ²Ø§Ù† Ø­Ø±Ø§Ø±Ø©',
'Temperature gauge!':'!Ù…Ù‚ÙŠØ§Ø³ Ø­Ø±Ø§Ø±Ø©',
'Change the color thresholds!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù†',
'ğŸ”„ Progress Ring':'ğŸ”„ Ø­Ù„Ù‚Ø© ØªÙ‚Ø¯Ù…',
'Animated circle progress!':'!Ø¯Ø§Ø¦Ø±Ø© Ù…ØªØ­Ø±ÙƒØ©',
'Change the ring color!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ù„ÙˆÙ†',
'ğŸ¹ Piano Keys':'ğŸ¹ Ø¨ÙŠØ§Ù†Ùˆ',
'Play notes with clicks!':'!Ø§Ø¹Ø²Ù Ø¨Ø§Ù„Ù†Ù‚Ø±',
'Add more octaves!':'!Ø£Ø¶Ù Ø£ÙˆÙƒØªØ§ÙØ§Øª',
'ğŸ“¡ Radar Sweep':'ğŸ“¡ Ø±Ø§Ø¯Ø§Ø±',
'Rotating scanner with blips!':'!Ù…Ø§Ø³Ø­ Ø¯ÙˆÙ‘Ø§Ø±',
'Change sweep speed!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ø³Ø±Ø¹Ø©',
'ğŸ”¦ Flashlight':'ğŸ”¦ Ù…ØµØ¨Ø§Ø­',
'Toggle & adjust brightness!':'!ØªØ¨Ø¯ÙŠÙ„ ÙˆØ³Ø·ÙˆØ¹',
'Add a strobe mode!':'!Ø£Ø¶Ù ÙˆÙ…ÙŠØ¶',
'ğŸ“‹ Drag & Drop':'ğŸ“‹ Ø³Ø­Ø¨ ÙˆØ¥ÙÙ„Ø§Øª',
'Reorder by dragging!':'!Ø£Ø¹Ø¯ Ø§Ù„ØªØ±ØªÙŠØ¨',
'Add more items to the list!':'!Ø£Ø¶Ù Ø¹Ù†Ø§ØµØ±'
};
return{g:l.g,t:m[l.t]||l.t,d:m[l.d]||l.d,h:m[l.h]||l.h,c:l.c}});

const sciAR=sciEN.map(function(l){
var m={
'âš¡ Ohm\'s Law Lab':'âš¡ Ù…Ø®ØªØ¨Ø± Ø£ÙˆÙ…','V = I Ã— R with animations!':'!V=IÃ—R Ù…Ø¹ Ø­Ø±ÙƒØ§Øª','Change the resistance slider!':'!ØºÙŠÙ‘Ø± Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø©',
'ğŸ“» Morse Code':'ğŸ“» Ø´ÙØ±Ø© Ù…ÙˆØ±Ø³','Text â†’ dots & dashes â†’ beeps!':'!Ù†Øµ â† Ù†Ù‚Ø§Ø· ÙˆØ®Ø·ÙˆØ· â† Ø£ØµÙˆØ§Øª','Try typing your name!':'!Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ',
'ğŸ’¡ Logic Gates':'ğŸ’¡ Ø¨ÙˆØ§Ø¨Ø§Øª Ù…Ù†Ø·Ù‚ÙŠØ©','AND, OR, NOT â€” toggle & see!':'!AND OR NOT Ø¨Ø¯Ù‘Ù„ ÙˆØ´Ø§Ù‡Ø¯','Try different input combinations!':'!Ø¬Ø±Ù‘Ø¨ Ø§Ù„ØªÙˆÙ„ÙŠÙØ§Øª',
'ğŸ“ Wave Playground':'ğŸ“ Ù…Ù„Ø¹Ø¨ Ø§Ù„Ù…ÙˆØ¬Ø§Øª','See what radio signals look like!':'!Ø´Ø§Ù‡Ø¯ Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ','Try the square wave!':'!Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ù…ÙˆØ¬Ø© Ø§Ù„Ù…Ø±Ø¨Ø¹Ø©',
'ğŸ¤– Robot Commander':'ğŸ¤– Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ø±ÙˆØ¨ÙˆØª','Program a robot on a grid!':'!Ø¨Ø±Ù…Ø¬ Ø±ÙˆØ¨ÙˆØª','Try LOOP 4 { FORWARD }':'!LOOP 4 Ø¬Ø±Ù‘Ø¨',
'ğŸ”­ Star Map':'ğŸ”­ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù†Ø¬ÙˆÙ…','Real stars in the night sky!':'!Ù†Ø¬ÙˆÙ… Ø­Ù‚ÙŠÙ‚ÙŠØ©','Use the time slider to rotate!':'!Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†Ø²Ù„Ù‚',
'ğŸ“¡ Signal Lab':'ğŸ“¡ Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª','Mix waves & see interference!':'!Ø§Ù…Ø²Ø¬ Ø§Ù„Ù…ÙˆØ¬Ø§Øª','Try changing both frequencies!':'!ØºÙŠÙ‘Ø± Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª',
'âš›ï¸ Periodic Table':'âš›ï¸ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠ','All 118 elements interactive!':'!ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± ØªÙØ§Ø¹Ù„ÙŠØ©','Click an element for details!':'!Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø¹Ù†ØµØ±',
'ğŸ“Š Spectrum Analyzer':'ğŸ“Š Ù…Ø­Ù„Ù„ Ø§Ù„Ø·ÙŠÙ','See sound frequencies live!':'!Ø´Ø§Ù‡Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø©','Try whistling or clapping!':'!ØµÙÙ‘Ø± Ø£Ùˆ ØµÙÙ‘Ù‚',
'ğŸ“ Fourier Visualizer':'ğŸ“ Ù…Ø­Ù„Ù„ ÙÙˆØ±ÙŠÙŠÙ‡','Any wave = sum of sines!':'!Ø£ÙŠ Ù…ÙˆØ¬Ø© = Ù…Ø¬Ù…ÙˆØ¹ Ø¬ÙŠÙˆØ¨','Move the harmonic sliders!':'!Ø­Ø±Ù‘Ùƒ Ø§Ù„Ù…Ù†Ø²Ù„Ù‚Ø§Øª',
'ğŸ›°ï¸ Satellite Tracker':'ğŸ›°ï¸ Ù…ØªØªØ¨Ø¹ Ø§Ù„Ø£Ù‚Ù…Ø§Ø±','Watch the ISS orbit Earth!':'!Ø´Ø§Ù‡Ø¯ Ù…Ø­Ø·Ø© Ø§Ù„ÙØ¶Ø§Ø¡','Adjust the speed slider!':'!Ø§Ø¶Ø¨Ø· Ø§Ù„Ø³Ø±Ø¹Ø©',
'ğŸ’¡ Circuit Builder':'ğŸ’¡ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø±','Wire up LEDs & resistors!':'!ÙˆØµÙ‘Ù„ LEDs ÙˆØ§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø§Øª','Click components, then click cells!':'!Ø§Ù†Ù‚Ø± Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª'
};
return{g:l.g,t:m[l.t]||l.t,d:m[l.d]||l.d,h:m[l.h]||l.h,c:l.c}});

return{
en:{ui:UI.en,basics:basicsEN,science:sciEN},
fr:{ui:UI.fr,basics:basicsFR,science:sciFR},
ar:{ui:UI.ar,basics:basicsAR,science:sciAR}
};
}// end mkI18N

const I18N=mkI18N();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let lang='en',themeKey='stealth',track='basics',lessonIdx=0;
let completed={basics:{},science:{}};
let sidebarOpen=true,hintOpen=false;
const $=id=>document.getElementById(id);

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STARFIELD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const cv=$('starfield'),ctx2=cv.getContext('2d');
const strs=Array.from({length:100},()=>({x:Math.random()*2e3,y:Math.random()*2e3,r:Math.random()*1.2+.2,op:Math.random()}));
let starAnim;
function resizeCv(){cv.width=innerWidth;cv.height=innerHeight}
function drawStars(){
  if(!TH[themeKey].stars){cancelAnimationFrame(starAnim);cv.style.display='none';return}
  cv.style.display='block';ctx2.clearRect(0,0,cv.width,cv.height);
  strs.forEach(s=>{s.op+=(Math.random()-.5)*.04;s.op=Math.max(.1,Math.min(1,s.op));
    ctx2.beginPath();ctx2.arc(s.x%cv.width,s.y%cv.height,s.r,0,Math.PI*2);
    ctx2.fillStyle=`rgba(255,255,255,${s.op})`;ctx2.fill()});
  starAnim=requestAnimationFrame(drawStars)}
addEventListener('resize',resizeCv);resizeCv();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const tierMap={html:'yellow',css:'yellow',js:'yellow',ctrl:'yellow',beg:'green',exp:'blue',adv:'red'};
const tierOrder={basics:['html','css','js','ctrl'],science:['beg','exp','adv']};

function getLessons(){return I18N[lang][track]}
function getUI(){return I18N[lang].ui}

function render(){
  const ui=getUI(),lessons=getLessons(),th=TH[themeKey],lesson=lessons[lessonIdx];
  const isRtl=ui.dir==='rtl';

  // Direction
  $('app').className=isRtl?'rtl':'';
  document.documentElement.lang=lang;
  document.body.style.fontFamily=isRtl?"'Noto Sans Arabic','Fredoka',sans-serif":"'Fredoka',sans-serif";

  // Theme vars
  const r=document.documentElement;
  Object.entries(th.v).forEach(([k,v])=>r.style.setProperty(k,v));

  // Stars
  cancelAnimationFrame(starAnim);drawStars();

  // Subtitle
  $('brandSub').textContent=ui.sub;

  // Track btns
  document.querySelectorAll('.track-btn').forEach(b=>{
    b.classList.toggle('active',b.dataset.track===track)});
  $('trackLabel1').textContent=ui.track1;
  $('trackLabel2').textContent=ui.track2;

  // Theme select
  const ts=$('themeSelect');ts.innerHTML='';
  Object.entries(TH).forEach(([k,v])=>{const o=document.createElement('option');
    o.value=k;o.textContent=v.n[lang];o.selected=k===themeKey;ts.appendChild(o)});

  // Progress
  const comp=completed[track];
  const cnt=Object.keys(comp).length;
  $('starCount').textContent=cnt;
  $('starTotal').textContent='/ '+lessons.length;
  $('trackFill').style.width=(cnt/lessons.length*100)+'%';

  // Lesson list
  const list=$('lessonList');list.innerHTML='';
  const grouped={};
  lessons.forEach((l,i)=>{if(!grouped[l.g])grouped[l.g]=[];grouped[l.g].push({...l,idx:i})});

  tierOrder[track].forEach(g=>{
    if(!grouped[g])return;
    const lbl=document.createElement('div');lbl.className='tier-label';
    lbl.innerHTML='<span class="tier-dot '+tierMap[g]+'"></span>'+ui.tiers[g];
    list.appendChild(lbl);
    grouped[g].forEach(item=>{
      const btn=document.createElement('button');
      btn.className='les-btn'+(item.idx===lessonIdx?' active':'');
      const done=comp[item.idx];
      btn.innerHTML='<span class="dot'+(done?' done':'')+'">'+
        (done?'âœ“':'')+'</span><span>'+item.t+'</span>';
      btn.onclick=()=>{lessonIdx=item.idx;hintOpen=false;render();loadCode();
        if(innerWidth<800){sidebarOpen=false;updateSB()}};
      list.appendChild(btn)})});

  // Topbar
  $('lesTitle').textContent=lesson.t;
  $('lesDesc').textContent=lesson.d;
  $('tierBadge').textContent=ui.tiers[lesson.g];
  $('prevBtn').disabled=lessonIdx===0;
  $('nextBtn').disabled=lessonIdx===lessons.length-1;

  // Labels
  $('labelTry').textContent=ui.tryIt;
  $('labelOut').textContent=ui.output;
  $('runBtn').textContent=ui.run;
  $('resetBtn').textContent=ui.reset;
  $('hintBtn').textContent=ui.hint;
  $('hintBox').textContent='ğŸ’¡ '+lesson.h;
  $('hintBox').className='hint-box'+(hintOpen?' show':'');
  $('menuBtn').textContent=sidebarOpen?'âœ•':'â˜°';

  // RTL sidebar border
  const sb=$('sidebar');
  sb.style.borderRight=isRtl?'none':'1px solid var(--card-border)';
  sb.style.borderLeft=isRtl?'1px solid var(--card-border)':'none';
}

function loadCode(){
  const lesson=getLessons()[lessonIdx];
  var code=lesson.c.replace(/\{\{\/SC\}\}/g,'<\/script>');
  $('codeEditor').value=code;
  $('preview').srcdoc=code;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ACTIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function runCode(){
  $('preview').srcdoc=$('codeEditor').value;
  const wasNew=!completed[track][lessonIdx];
  completed[track][lessonIdx]=true;
  render();if(wasNew)showToast()}
function resetCode(){hintOpen=false;loadCode();render()}
function toggleHint(){hintOpen=!hintOpen;$('hintBox').className='hint-box'+(hintOpen?' show':'')}
function toggleSidebar(){sidebarOpen=!sidebarOpen;updateSB()}
function updateSB(){$('sidebar').className=sidebarOpen?'':'closed';$('menuBtn').textContent=sidebarOpen?'âœ•':'â˜°'}
function go(d){const mx=getLessons().length-1;lessonIdx=Math.max(0,Math.min(mx,lessonIdx+d));hintOpen=false;render();loadCode()}
function switchLang(l){lang=l;lessonIdx=0;completed={basics:{},science:{}};hintOpen=false;render();loadCode()}
function switchTheme(t){themeKey=t;render()}
function switchTrack(t){track=t;lessonIdx=0;hintOpen=false;render();loadCode()}
function showToast(){const t=$('toast');t.textContent=getUI().congrats;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2e3)}

/* Tab support in editor */
$('codeEditor').addEventListener('keydown',function(e){
  if(e.key==='Tab'){e.preventDefault();const s=this.selectionStart,end=this.selectionEnd;
    this.value=this.value.substring(0,s)+'  '+this.value.substring(end);
    this.selectionStart=this.selectionEnd=s+2}});

/* INIT */
render();loadCode();
</script>
</body>
</html>
